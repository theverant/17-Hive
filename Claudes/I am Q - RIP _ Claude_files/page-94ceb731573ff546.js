(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9797],{10095:(e,t,s)=>{Promise.resolve().then(s.bind(s,90019))},90019:(e,t,s)=>{"use strict";s.d(t,{SharedPageContent:()=>I});var a=s(54568),i=s(7726),n=s(1761),r=s(67154),o=s(44338),d=s(52428),l=s(62971),c=s(31417),u=s(85330),h=s(41417),m=s(54890),f=s(38583),x=s(62942),p=s(7620),g=s(46760),j=s(81527),v=s(80566),y=s(30453),b=s(50824),_=s(97652),M=s(56326),C=s(28969),S=s(58565),U=s(56084),A=s(77186),w=s(37076);function N(e){let{isOpen:t,onClose:s,snapshotUuid:i,organizationUuid:n}=e,[r,o]=(0,p.useState)(),[d,c]=(0,p.useState)(),[u,h]=(0,p.useState)(),[m,f]=(0,p.useState)(),[x,g]=(0,p.useState)(!1),{mutateAsync:j}=(0,A.L2)("/api/organizations/".concat(n,"/chat_snapshots/").concat(i,"/report"),"POST",{enabled:!!i&&!!n}),v=async()=>{await j({notes:d,category:r,reporter_name:m,reporter_email:u,opt_out_of_training:x}),o(void 0),c(void 0),f(void 0),h(void 0),g(!1),s(!0)};return(0,a.jsx)(w.aF,{modalSize:"md",isOpen:t,onClose:s,hasCloseButton:!0,title:(0,a.jsx)("span",{className:"font-claude-response font-medium",children:(0,a.jsx)(l.A,{defaultMessage:"Report chat",id:"SEH7AfCM+w"})}),children:(0,a.jsx)(U.d,{category:r,setCategory:o,notes:d,setNotes:c,reporterEmail:u,setReporterEmail:h,reporterName:m,setReporterName:f,optOutOfTraining:x,setOptOutOfTraining:g,onSubmit:v,onClose:()=>s(!1)})})}function z(e){let{snapshot:t}=e,s=(0,g.A)(),[i,r]=(0,p.useState)(void 0),d=(0,x.useRouter)(),[U,A]=(0,p.useState)(!1),[w,z]=(0,p.useState)(!1),{data:I}=(0,j.fo)(t.project_uuid),{activeOrganization:k}=(0,n.YL)(),O=null==k?void 0:k.uuid,{artifacts:T,lastArtifact:E}=(0,p.useMemo)(()=>{let e,a={};return t.chat_messages.forEach(t=>{Object.values((0,m.Xz)(t)).forEach(i=>{var n,r,o;let{id:d,currentVersion:l,type:c,title:u,language:h}=i,f=(0,m.zI)(l,null==(o=a[d])||null==(r=o.versions)||null==(n=r.slice(-1)[0])?void 0:n.resultState),x={...l,resultState:f};e={messageUuid:t.uuid,versionUuid:x.uuid,artifactId:d},a[d]?a[d].versions.push(x):a[d]={id:d,type:c||"document",title:u||s.formatMessage({defaultMessage:"Untitled",id:"3kbIhS7KZS"}),language:h||void 0,versions:[x]}})}),{artifacts:a,lastArtifact:e}},[t.chat_messages,s]),[R,Y]=(0,p.useState)(E),D=(0,u.f)({artifactContext:(null==R?void 0:R.versionUuid)?{uuid:R.versionUuid,type:"artifact_version"}:void 0}),F=(0,p.useMemo)(()=>t.chat_messages.flatMap(e=>e.attachments),[t.chat_messages]),P=(0,p.useMemo)(()=>t.chat_messages.flatMap(e=>e.files),[t.chat_messages]),G=(0,c.y)(F,P,O,t.project_uuid),K=(0,p.useMemo)(()=>({claudeComplete:D,getFile:G}),[D,G]),Z=(0,p.useCallback)(e=>(0,a.jsx)(S.A,{...e,conversationUUID:t.uuid,isShared:!0,artifacts:T,onOpenArtifact:(e,t,s)=>{r(void 0),Y({artifactId:e,messageUuid:t,versionUuid:s})}}),[r,Y,T,t.uuid]);return"error"in t?(0,a.jsx)(o.R,{productSurface:"claude-ai",headline:(0,a.jsx)(l.A,{defaultMessage:"Error",id:"KN7zKn8z4F"}),subheading:(0,a.jsx)(l.A,{defaultMessage:"There has been an error while loading the conversation. Please try again later.",id:"qC/NyiYpT1"}),button:(0,a.jsx)(h.$,{onClick:()=>d.back(),children:(0,a.jsx)(l.A,{defaultMessage:"Go back",id:"orvpWhO3rI"})})}):w?(0,a.jsxs)("div",{className:"flex h-screen flex-col items-center justify-center gap-4",children:[(0,a.jsx)("h1",{className:"font-ui-serif text-text-100 max-w-xl text-center text-[1.75rem] tracking-tight",children:(0,a.jsx)(l.A,{defaultMessage:"Chat reported",id:"TzYCE1hsD7"})}),(0,a.jsx)("p",{className:"text-text-300 max-w-xl text-center",children:(0,a.jsx)(l.A,{defaultMessage:"Thank you for helping keep Claude safe and reliable. We’ll review your report as soon as possible.",id:"hrWcYUayKO"})}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(h.$,{variant:"primary",size:"lg",onClick:()=>z(!1),children:(0,a.jsx)(l.A,{defaultMessage:"Return to chat",id:"urZR3I2eGQ"})})})]}):(0,a.jsx)(b.b,{mainElement:(0,a.jsxs)("div",{className:"relative mx-auto flex h-full w-full max-w-3xl flex-1 flex-col md:px-2",children:[(0,a.jsxs)(C.g,{children:[(0,a.jsxs)("div",{className:"border-0.5 border-border-400 text-text-400 flex items-center justify-between gap-2 rounded-xl px-3 py-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.R,{size:16,className:"shrink-0"}),(0,a.jsx)("p",{className:"text-xs leading-snug",children:t.created_by?(0,a.jsx)(l.A,{defaultMessage:"This is a copy of a chat between Claude and {sharedBy}. Content may include unverified or unsafe content that do not represent the views of Anthropic. Shared snapshot may contain attachments and data not displayed here.",id:"6JISQP9sUJ",values:{sharedBy:t.created_by}}):(0,a.jsx)(l.A,{defaultMessage:"This is a copy of a chat between Claude and a user. Content may include unverified or unsafe content that do not represent the views of Anthropic. Shared snapshot may contain attachments and data not displayed here.",id:"EG+hUsDlur"})})]}),t.is_public&&(0,a.jsx)(h.$,{variant:"ghost",size:"sm",onClick:()=>A(!0),children:(0,a.jsx)(l.A,{defaultMessage:"Report",id:"x5Tz6MZH82"})})]}),(0,a.jsx)(M.$,{renderToolUseCell:Z,children:t.chat_messages&&t.chat_messages.map((e,s)=>{var i,n;return(0,a.jsx)(_.c,{author:t.created_by||"",message:e,conversationUUID:t.uuid,isStreaming:!1,isLastMessage:s===t.chat_messages.length-1,isInteractive:!1,selectAttachment:r,onOpenArtifact:(e,t)=>{r(void 0),Y({artifactId:e,messageUuid:t,versionUuid:void 0})},showSharedImageMissing:(null!=(i=e.image_count)?i:0)>0,showSharedFileMissing:(null!=(n=e.file_count)?n:0)>0,isShared:!0,isTemporary:!1},e.index)})})]}),(0,a.jsx)("div",{className:"sticky bottom-0 mx-auto flex w-full flex-col items-center justify-center gap-3 pb-4 pt-4",children:(0,a.jsx)(h.$,{variant:"primary",href:t.project_uuid?"/project/".concat(t.project_uuid):"/new",children:(0,a.jsx)(l.A,{defaultMessage:"Start your own conversation",id:"fyao1XCKIk"})})})]}),drawerElement:(0,a.jsxs)(a.Fragment,{children:[i&&(0,a.jsx)(y.f,{attachment:i,onClose:()=>r(void 0)}),R&&(0,a.jsx)(v.CV,{isOpen:!0,isStreaming:!1,artifact:T[R.artifactId],selectedArtifactMessageUUID:R.messageUuid,selectedArtifactVersionUUID:R.versionUuid,setSelectedArtifactVersionUUID:e=>{Y(t=>t&&{...t,versionUuid:e})},onClose:()=>Y(void 0),projectUuid:t.project_uuid,richSandboxCapabilities:K,disablePublishing:!0,isTemporary:!1})]}),auxilaryElement:(0,a.jsx)(N,{isOpen:U,onClose:e=>{e&&z(e),A(!1)},snapshotUuid:t.uuid,organizationUuid:null==k?void 0:k.uuid}),isDrawerOpen:!!(R||i),headerProps:{conversationUUID:t.uuid,name:t.snapshot_name||s.formatMessage({defaultMessage:"Untitled chat",id:"lfYALmQol/"}),isInteractive:!1,project:I,isSharedChat:!0,sharedBy:t.created_by}})}function I(e){let{params:{snapshot_uuid:t}}=e,{activeOrganization:s,isLoggedOut:c}=(0,n.YL)(),u=(0,n.mV)(),{data:h,isError:m}=(0,i.FG)(t);if(m){if(c){let e="/login?returnTo=".concat(encodeURIComponent("/share/".concat(t)));return(0,a.jsx)(d.Redirect,{to:e})}let e=u&&!!(null==s?void 0:s.name);return(0,a.jsx)(o.R,{productSurface:"claude-ai",headline:(0,a.jsx)(l.A,{defaultMessage:"Conversation not found",id:"Gxn0f15FTj"}),subheading:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"mb-4 mt-4",children:(0,a.jsx)(l.A,{defaultMessage:"The requested conversation either doesn’t exist or you don’t have permission to access it.",id:"5Y6Yy1lnzB"})}),(0,a.jsxs)("p",{children:[e?(0,a.jsx)(l.A,{defaultMessage:"You’re currently within the {organizationName} organization.",id:"VFZmWiM2AU",values:{organizationName:(0,a.jsx)("span",{className:"font-medium",children:s.name})}}):(0,a.jsx)(l.A,{defaultMessage:"You are currently viewing from your personal account.",id:"qGzyQ5ZD/s"}),"\xa0",(0,a.jsx)(l.A,{defaultMessage:"You can try switching to a different organization.",id:"2ZUgKbbno+"})]})]})})}return h?(0,a.jsx)(k,{snapshot:h}):(0,a.jsx)(r.H,{})}function k(e){let{snapshot:t}=e;return(0,a.jsx)(z,{snapshot:t})}}},e=>{e.O(0,[1658,3473,7598,2971,7261,2846,5006,1036,9474,5015,7773,4974,7463,8571,1404,5647,6631,2814,3103,3970,8864,7519,3131,5355,497,887,4258,8013,4478,1070,6031,9501,628,45,1837,3904,1570,6841,784,8687,1761,8518,370,9639,4029,7187,1178,7383,4116,28,2947,1336,9769,8211,6147,953,197,7143,3592,4384,1128,7561,7226,7877,7354,8969,587,842,7378,7358],()=>e(e.s=10095)),_N_E=e.O()}]);