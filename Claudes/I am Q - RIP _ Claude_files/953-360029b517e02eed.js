"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{1385:(e,t,s)=>{s.d(t,{c:()=>u,j:()=>m});var a=s(42977),n=s(54568),l=s(90510),r=s(32987),i=s(7620),o=s(62971);function d(){let e=(0,a._)(["\n  relative\n  bg-text-500/50\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return d=function(){return e},e}function c(){let e=(0,a._)(["\n  relative\n  bg-bg-400\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-bg-000/0 after:from-0% after:via-bg-000/20 after:via-50% after:to-100% after:to-bg-000/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return c=function(){return e},e}let u=e=>{let{repeat:t,children:s}=e;return(0,n.jsx)(n.Fragment,{children:Array.from({length:t}).map((e,t)=>(0,n.jsx)(i.Fragment,{children:s},t))})};function m(e){let{className:t,height:s=24,width:a,rounded:l="full",variant:d="default"}=e,c=(0,i.useRef)(null),u={height:s,width:"number"==typeof a||"string"==typeof a?a:"object"==typeof a?(null===c.current&&(c.current=Math.round(Math.random()*(a.max-a.min))+a.min),c.current):"100%",maxWidth:"100%"};return(0,n.jsx)("light"===d?f:x,{className:(0,r.A)(t,{"rounded-full":"full"===l,"rounded-xl":"xl"===l,"rounded-lg":"lg"===l,"rounded-md":"md"===l,"rounded-sm":"sm"===l}),style:u,children:(0,n.jsx)("span",{className:"sr-only",children:(0,n.jsx)(o.A,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}let x=l.J.div(d()),f=l.J.div(c())},8835:(e,t,s)=>{s.d(t,{i:()=>x});var a=s(54568),n=s(1761),l=s(41417),r=s(12072),i=s(60265),o=s(24871),d=s(62971),c=s(92947),u=s(32987);let m=e=>{let{onClick:t,className:s,children:n,disabled:i,...o}=e;return(0,a.jsx)(r.m,{tooltipContent:!i&&(0,a.jsx)(d.A,{defaultMessage:"Connect",id:"+vVZ/G11Zg"}),children:(0,a.jsx)(l.$,{className:(0,u.A)("!border-border-300 !rounded-lg",i?"!text-text-400":"hover:!bg-bg-200",s),disabled:i,onClick:e=>{e.stopPropagation(),null==t||t(e)},variant:"secondary",size:"icon_sm",...o,children:n})})},x=e=>{let{isDetailedView:t,handleAdd:s,handleRemove:u,handleConnect:x,handleDisconnect:f,isInstalled:g,isConnected:h,connectedByDefault:p}=e,v=(0,c.vx)(),j=(0,n.mV)();if("free"===(0,n.$b)())return t?(0,a.jsx)(l.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",href:"/upgrade?open_in_browser=1",target:"_blank",children:(0,a.jsx)(d.A,{defaultMessage:"Upgrade to connect",id:"33HAnsQE8u"})}):void 0;let b=!v&&!g;if(j&&v)if(g)return t?(0,a.jsx)(l.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",onClick:u,children:(0,a.jsx)(d.A,{defaultMessage:"Remove from your team",id:"dl4er/5ODx"})}):(0,a.jsx)(i.S,{size:16,className:"transition-opacity m-2 text-accent-secondary-100"});else return t?(0,a.jsx)(l.$,{variant:"primary",size:"sm",className:"!rounded-lg !text-sm",onClick:s,children:(0,a.jsx)(d.A,{defaultMessage:"Add to your team",id:"Bq/DQi0LBe"})}):null;if(j&&!v)if(p)return t?(0,a.jsx)(l.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",disabled:!0,children:(0,a.jsx)(d.A,{defaultMessage:"Connected by default",id:"VqhPBBbJWk"})}):(0,a.jsx)(i.S,{size:16,className:"transition-opacity m-2 text-text-500"});else if(h)return t?(0,a.jsx)(l.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",onClick:f,children:(0,a.jsx)(d.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})}):(0,a.jsx)(i.S,{size:16,className:"transition-opacity m-2 text-text-500"});else return t?(0,a.jsx)(r.m,{tooltipContent:b?(0,a.jsx)(d.A,{defaultMessage:"Ask your admin to add this for your team",id:"q273cUNkwo"}):void 0,children:(0,a.jsx)("div",{children:(0,a.jsx)(l.$,{variant:"primary",size:"sm",className:"!rounded-lg !text-sm",disabled:b,onClick:x,children:(0,a.jsx)(d.A,{defaultMessage:"Connect",id:"+vVZ/G11Zg"})})})}):(0,a.jsx)(r.m,{tooltipContent:b?(0,a.jsx)(d.A,{defaultMessage:"Ask your admin to add this for your team",id:"q273cUNkwo"}):void 0,children:(0,a.jsx)("div",{children:(0,a.jsx)(m,{disabled:b,onClick:x,children:(0,a.jsx)(o.c,{size:16})})})});if(!j)if(g&&h)return t?(0,a.jsx)(l.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",onClick:u,children:(0,a.jsx)(d.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})}):(0,a.jsx)(i.S,{size:16,className:"transition-opacity m-2 text-text-500"});else return t?(0,a.jsx)(l.$,{variant:"primary",size:"sm",className:"!rounded-lg !text-sm",onClick:g?x:s,children:(0,a.jsx)(d.A,{defaultMessage:"Connect",id:"+vVZ/G11Zg"})}):(0,a.jsx)(m,{onClick:g?x:s,children:(0,a.jsx)(o.c,{size:16})})}},15989:(e,t,s)=>{s.d(t,{J:()=>g});var a=s(54568),n=s(8027),l=s(11515),r=s(86030),i=s(64359),o=s(37076),d=s(32987),c=s(46760),u=s(62971),m=s(47823),x=s(73347),f=s(22364);function g(e){let{onClose:t,server:s}=e,d=(0,c.A)();return(0,a.jsx)(o.aF,{isOpen:!0,hasCloseButton:!0,onClose:t,modalSize:"xl",children:(0,a.jsxs)("div",{className:"px-6 pb-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-6",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.d,{url:s.url,fallbackSvg:(0,a.jsx)(n.B,{letter:s.name,size:40}),size:40}),(0,a.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("p",{className:"font-medium",children:s.name}),(0,a.jsx)(r.E,{children:"remote"===s.type?(0,a.jsx)(u.A,{defaultMessage:"CUSTOM",id:"Jg/zGahNtM"}):(0,a.jsx)(u.A,{defaultMessage:"LOCAL DEV",id:"S14UXqQo+W"})})]}),s.url?(0,a.jsx)(m.sd,{url:s.url}):s.version&&(0,a.jsx)("div",{className:"text-sm text-text-400",children:s.version})]})]})}),(0,a.jsx)(i.r,{gradientHeight:24,className:"h-[500px]",children:(0,a.jsx)("div",{className:"flex flex-col pb-4",children:(()=>{var e,t,n;let l=(null==(e=s.tools)?void 0:e.length)>0,r=(null==(t=s.resources)?void 0:t.length)>0,i=(null==(n=s.prompts)?void 0:n.length)>0,o=!l&&r,c=!l&&!r&&i;return(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsx)(h,{name:d.formatMessage({defaultMessage:"Tools",id:"nUT0LvZVOx"}),items:s.tools,server:s,isFirst:l}),r&&(0,a.jsx)(h,{name:d.formatMessage({defaultMessage:"Resources",id:"c/KktLImbB"}),items:s.resources,isFirst:o}),i&&(0,a.jsx)(h,{name:d.formatMessage({defaultMessage:"Prompts",id:"p7buKPIFPB"}),items:s.prompts,isFirst:c})]})})()})})]})})}function h(e){let{name:t,items:s,server:n,isFirst:l}=e;return(0,a.jsxs)("div",{className:(0,d.A)("flex flex-col pb-4",!l&&"border-t border-border-300 pt-4"),children:[(0,a.jsx)("div",{className:"sticky top-0 w-full bg-bg-100 pt-2 pb-4 z-10",children:(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsx)("div",{className:"font-large-bold text-text-100",children:t})})}),(0,a.jsx)("div",{children:s.map(e=>{let t=(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"font-base-bold",children:e.name}),(0,a.jsx)(x.M,{text:e.description})]});return(0,a.jsx)("div",{className:"py-2",children:n?(0,a.jsx)(f.P,{tool:e,server:n,children:t},e.name):t},e.name)})})]})}},24644:(e,t,s)=>{s.d(t,{E:()=>i});var a=s(54568),n=s(9537),l=s(46760),r=s(62971);function i(e){let{domain:t,setDomain:s,clientId:i,setClientId:o,deploymentId:d,setDeploymentId:c}=e,u=(0,l.A)();return(0,a.jsxs)("div",{className:"flex flex-col gap-3 mt-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(n.ks,{required:!0,label:u.formatMessage({defaultMessage:"Canvas Domain",id:"Aok65+sKzA"}),placeholder:u.formatMessage({defaultMessage:"https://school.instructure.com or https://canvas.myschool.edu",id:"VAjV+8SnM6"}),value:t,onValueChange:e=>s(e||""),onBlur:()=>s(t.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(r.A,{defaultMessage:"Enter your Canvas domain (e.g., ‘https://school.instructure.com’ for hosted Canvas or ‘https://canvas.myschool.edu’ for self-hosted)",id:"uFbHowgMW9"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(n.ks,{required:!0,label:u.formatMessage({defaultMessage:"Client ID",id:"U5+MBCY8VU"}),placeholder:u.formatMessage({defaultMessage:"00000000000000",id:"BLrL/pjQgI"}),value:i,onValueChange:e=>o(e||""),onBlur:()=>o(i.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(r.A,{defaultMessage:"The Client ID from your Canvas LTI app registration (found in Canvas Admin > Developer Keys)",id:"iV5X/WX6MA"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(n.ks,{required:!0,label:u.formatMessage({defaultMessage:"Deployment ID",id:"/h+RD9WlzS"}),placeholder:u.formatMessage({defaultMessage:"1",id:"Tf9Oo0DwqC"}),value:d,onValueChange:e=>c(e||""),onBlur:()=>c(d.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(r.A,{defaultMessage:"The Deployment ID for your Canvas LTI integration",id:"iLMNAW31CI"})})]})]})}},25465:(e,t,s)=>{s.d(t,{AW:()=>u,Ks:()=>x,LK:()=>f,oo:()=>m,sr:()=>c});var a=s(77186),n=s(1761),l=s(65631),r=s(27062),i=s(87606);let o="lti_platforms";function d(){let{value:e}=(0,r.fS)("claude_ai_velvet_accordion");return e}let c=()=>{let{activeOrganization:e,account:t}=(0,n.YL)(),s=null==e?void 0:e.uuid,r=(0,l.yI)(t,e,l.Nt.OrganizationManage),i=d();return(0,a.Sk)("/api/organizations/".concat(s,"/lti/platforms"),{queryKey:[o,{orgUUID:s}],enabled:!!e&&!!s&&r&&i})},u=e=>{let t=(0,i.useQueryClient)(),{activeOrganization:s}=(0,n.YL)(),l=null==s?void 0:s.uuid,r=d();return(0,a.L2)("/api/organizations/".concat(l,"/lti/platforms"),"PUT",{enabled:r,onSuccess:e=>{t.setQueryData([o,{orgUUID:l}],t=>t?[...t,e]:[e]),t.invalidateQueries({queryKey:[o]})},onSettled:(e,s)=>{e&&!s&&(t.setQueryData([o,{orgUUID:l}],t=>t?[...t,e]:[e]),t.invalidateQueries({queryKey:[o]}))},...e})},m=e=>{let t=(0,i.useQueryClient)(),{activeOrganization:s}=(0,n.YL)(),l=null==s?void 0:s.uuid,r=d();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(l,"/lti/platforms/").concat(t)},"POST",{enabled:r,onSuccess:(e,s)=>{t.setQueryData([o,{orgUUID:l}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===s.platformId);if(-1!==a){let s=[...t];return s[a]=e,s}return t}),t.invalidateQueries({queryKey:[o]})},onSettled:(e,s,a)=>{e&&!s&&(t.setQueryData([o,{orgUUID:l}],t=>{if(!t)return[e];let s=t.findIndex(e=>e.id===a.platformId);if(-1!==s){let a=[...t];return a[s]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})},x=e=>{let t=(0,i.useQueryClient)(),{activeOrganization:s}=(0,n.YL)(),l=null==s?void 0:s.uuid,r=d();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(l,"/lti/platforms/").concat(t)},"POST",{enabled:r,onMutate:e=>e,onSuccess:(e,s)=>{t.setQueryData([o,{orgUUID:l}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===s.platformId);if(-1!==a){let s=[...t];return s[a]=e,s}return t}),t.invalidateQueries({queryKey:[o]})},onError:()=>{},onSettled:(e,s,a)=>{e&&!s&&(t.setQueryData([o,{orgUUID:l}],t=>{if(!t)return[e];let s=t.findIndex(e=>e.id===a.platformId);if(-1!==s){let a=[...t];return a[s]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})},f=e=>{let t=(0,i.useQueryClient)(),{activeOrganization:s}=(0,n.YL)(),l=null==s?void 0:s.uuid,r=d();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(l,"/lti/platforms/").concat(t)},"POST",{enabled:r,onMutate:e=>e,onSuccess:(e,s)=>{t.setQueryData([o,{orgUUID:l}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===s.platformId);if(-1!==a){let s=[...t];return s[a]=e,s}return t}),t.invalidateQueries({queryKey:[o]})},onError:()=>{},onSettled:(e,s,a)=>{e&&!s&&(t.setQueryData([o,{orgUUID:l}],t=>{if(!t)return[e];let s=t.findIndex(e=>e.id===a.platformId);if(-1!==s){let a=[...t];return a[s]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})}},42067:(e,t,s)=>{s.d(t,{l:()=>c,z:()=>m});var a=s(54568),n=s(60370),l=s(615),r=s(32987),i=s(7620),o=s(41417);let d=(0,l.F)("flex\n  w-fit\n  rounded-lg\n  p-2\n  px-4\n  gap-1\n  items-center\n  text-sm\n  border-0.5\n  border-border-200\n",{variants:{variant:{main:"text-accent-main-000 bg-bg-300",secondary:"text-accent-secondary-000 bg-bg-300",pro:"text-accent-pro-000 border-accent-pro-100 bg-accent-pro-900",danger:"text-danger-000 border-danger-100 bg-danger-900"}},defaultVariants:{variant:"main"}});function c(e){let{icon:t,message:s,customButton:l,cta:c,ctaHref:m,onCtaClick:x,onClose:f,variant:g,className:h}=e,p=t?(0,a.jsx)("div",{className:"flex mr-2 shrink-0",children:i.createElement(t,{size:20})}):null,v=null;return f&&(v=(0,a.jsx)(o.$,{size:"icon_sm",variant:"ghost",onClick:f,children:(0,a.jsx)(n.X,{size:16})})),v=v?(0,a.jsx)("div",{children:v}):null,(0,a.jsxs)("div",{className:(0,r.A)(d({variant:g}),!!f&&"pr-2",h),children:[p,(0,a.jsx)("div",{className:(0,r.A)("grow leading-relaxed","danger"!==g&&"pro"!==g&&"text-text-000","danger"===g&&"text-danger-000","pro"===g&&"text-accent-pro-000"),children:s}),(0,a.jsx)(u,{customButton:l,cta:c,ctaHref:m,onCtaClick:x,variant:"pro"===g?"flat":function(e){switch(e){case"main":return"primary";case"danger":return"danger";case"secondary":case"pro":return"outline"}}(g),className:(0,r.A)("pro"===g&&"!bg-accent-pro-100 border-accent-pro-100 hover:border-accent-pro-200 hover:bg-accent-pro-900")}),v]})}function u(e){let{customButton:t,cta:s,ctaHref:n,onCtaClick:l,...r}=e,i=t;return!i&&s&&(n?i=(0,a.jsx)(o.$,{size:"default",...r,href:n,children:s}):l&&(i=(0,a.jsx)(o.$,{size:"default",...r,onClick:l,children:s}))),i?(0,a.jsx)("div",{className:"ml-2",children:i}):null}let m=e=>{let{className:t,children:s}=e;return(0,a.jsxs)("div",{className:(0,r.A)("border-border-300 bg-bg-300 mt-3 flex gap-2 rounded-lg border px-3 py-3",t),children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.R2D,{size:20,className:"text-accent-main-100"})}),(0,a.jsx)("p",{className:"text-text-100 text-sm tracking-tighter",children:s})]})}},42952:(e,t,s)=>{s.d(t,{S:()=>d});var a=s(54568),n=s(41417),l=s(37076),r=s(7620),i=s(62971),o=s(24644);function d(e){var t;let{platform:s,onClose:d,onSubmit:c,loading:u}=e,[m,x]=(0,r.useState)(s.issuer),[f,g]=(0,r.useState)(s.client_id),[h,p]=(0,r.useState)((null==(t=s.deployment_ids)?void 0:t[0])||""),v=!m.trim()||!f.trim()||!h.trim();return(0,a.jsx)(l.aF,{isOpen:!0,onClose:d,modalSize:"xl",title:(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsx)(i.A,{defaultMessage:"Edit Canvas Instance",id:"aBsNZWVKN+"})}),subtitle:(0,a.jsx)(i.A,{defaultMessage:"Update your Canvas LMS instance configuration",id:"FqSEGC5V7F"}),children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v||c(s.id,m.trim().replace(/\/$/,""),f.trim(),h.trim())},className:"flex flex-col",children:[(0,a.jsx)(o.E,{domain:m,setDomain:x,clientId:f,setClientId:g,deploymentId:h,setDeploymentId:p}),(0,a.jsxs)(l.vW,{children:[(0,a.jsx)(n.$,{type:"submit",loading:u,disabled:v,children:(0,a.jsx)(i.A,{defaultMessage:"Save Changes",id:"3VI9mt1zm0"})}),(0,a.jsx)(n.$,{variant:"secondary",onClick:d,children:(0,a.jsx)(i.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})})}},44770:(e,t,s)=>{s.d(t,{r:()=>C,z:()=>A});var a=s(54568),n=s(41417),l=s(56370),r=s(90119),i=s(96377),o=s(32987),d=s(7620),c=s(46760),u=s(25465),m=s(37076),x=s(4705),f=s(62971);function g(e){let{platform:t,onClose:s,onConfirm:l,loading:r}=e,i=(e=>{let t=e.match(/^https?:\/\/([^.]+)\.instructure\.com/);return(null==t?void 0:t[1])||e})(t.issuer);return(0,a.jsxs)(m.aF,{isOpen:!0,onClose:s,modalSize:"md",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center text-danger-000",children:[(0,a.jsx)(x.N,{size:20,weight:"bold"}),(0,a.jsx)(f.A,{defaultMessage:"Disable Canvas Instance",id:"/71AtmCEAt"})]}),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-text-000",children:(0,a.jsx)(f.A,{defaultMessage:"Are you sure you want to disable the Canvas instance ‘{platformName}’?",id:"5Sw2NbmZOi",values:{platformName:t.name||i}})}),(0,a.jsxs)("div",{className:"p-3 bg-danger-100 border border-danger-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-000 text-sm font-medium mb-2",children:(0,a.jsx)(f.A,{defaultMessage:"This action will:",id:"zvWv7FFtPu"})}),(0,a.jsxs)("ul",{className:"text-text-000 text-sm space-y-1 list-disc ml-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Temporarily disable Claude access from Canvas for this instance",id:"lIEPYlaaQV"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Prevent users from launching Claude from Canvas",id:"DeUCbJxieq"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Can be re-enabled at any time without reconfiguration",id:"wnmm8Q2qIC"})})]})]}),(0,a.jsx)("p",{className:"text-text-200 text-sm",children:(0,a.jsx)(f.A,{defaultMessage:"This Canvas instance will remain configured and can be re-enabled at any time.",id:"a5jT7TDFXC"})})]}),(0,a.jsxs)(m.vW,{children:[(0,a.jsx)(n.$,{variant:"danger",onClick:()=>l(t.id),loading:r,children:(0,a.jsx)(f.A,{defaultMessage:"Disable Canvas Instance",id:"/71AtmCEAt"})}),(0,a.jsx)(n.$,{variant:"secondary",onClick:s,children:(0,a.jsx)(f.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}var h=s(42952),p=s(17937);function v(e){let{platform:t,onClose:s,onConfirm:l,loading:r}=e,i=(e=>{let t=e.match(/^https?:\/\/([^.]+)\.instructure\.com/);return(null==t?void 0:t[1])||e})(t.issuer);return(0,a.jsxs)(m.aF,{isOpen:!0,onClose:s,modalSize:"md",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center text-accent-secondary-000",children:[(0,a.jsx)(p.r,{size:20,weight:"bold"}),(0,a.jsx)(f.A,{defaultMessage:"Enable Canvas Instance",id:"x5ntJF/m/o"})]}),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-text-000",children:(0,a.jsx)(f.A,{defaultMessage:"Are you sure you want to enable the Canvas instance ‘{platformName}’?",id:"sltSpK2pM1",values:{platformName:t.name||i}})}),(0,a.jsxs)("div",{className:"p-3 bg-accent-main-100 border border-accent-main-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-000 text-sm font-medium mb-2",children:(0,a.jsx)(f.A,{defaultMessage:"This will:",id:"+yrIUjrxTS"})}),(0,a.jsxs)("ul",{className:"text-text-000 text-sm space-y-1 list-disc ml-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Restore Claude access from Canvas for this instance",id:"6gypIwnFmn"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Allow users to launch Claude from Canvas again",id:"/aTphs8E3Z"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Reactivate the LTI integration for all users in your organization",id:"jX7w8Etxw8"})})]})]})]}),(0,a.jsxs)(m.vW,{children:[(0,a.jsx)(n.$,{variant:"primary",onClick:()=>l(t.id),loading:r,children:(0,a.jsx)(f.A,{defaultMessage:"Enable Canvas Instance",id:"x5ntJF/m/o"})}),(0,a.jsx)(n.$,{variant:"secondary",onClick:s,children:(0,a.jsx)(f.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}var j=s(82258),b=s(82010),y=s(64707),N=s(15989),C=function(e){return e[e.TOOLS=0]="TOOLS",e[e.DISCONNECT=1]="DISCONNECT",e[e.REMOVE=2]="REMOVE",e[e.DISABLE=3]="DISABLE",e[e.EDIT_CANVAS=4]="EDIT_CANVAS",e[e.DISABLE_CANVAS=5]="DISABLE_CANVAS",e[e.ENABLE_CANVAS=6]="ENABLE_CANVAS",e}({});function A(e){let{type:t,server:s,actions:m}=e,x=(0,c.A)(),f=(0,r.V)(),[p,C]=(0,d.useState)(void 0),A=()=>C(void 0),{data:M}=(0,u.sr)(),w=(0,u.oo)({onSuccess:A}),S=(0,u.Ks)({onSuccess:A}),_=(0,u.LK)({onSuccess:A}),k=null==M?void 0:M[0];if(0===m.length)return;let E={0:x.formatMessage({defaultMessage:"Tools and settings",id:"8a8L0qsqhm"}),1:x.formatMessage({defaultMessage:"Disconnect",id:"qj1uhzynub"}),3:x.formatMessage({defaultMessage:"Disable",id:"Rw7iI7vYlr"}),2:x.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),4:x.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),5:x.formatMessage({defaultMessage:"Disable",id:"Rw7iI7vYlr"}),6:x.formatMessage({defaultMessage:"Enable",id:"TqSTI0/TZI"})},F=null;switch(p){case 0:F=(0,a.jsx)(N.J,{server:s,onClose:A});break;case 1:F=(0,a.jsx)(b.m,{type:t,server:s,onClose:A});break;case 3:F=(0,a.jsx)(j.u,{type:t,onClose:A});break;case 2:F=(0,a.jsx)(y.f,{server:s,onClose:A});break;case 4:F=k?(0,a.jsx)(h.S,{platform:k,onClose:A,onSubmit:(e,t,s,a)=>{w.mutate({platformId:e,canvas_url:t,client_id:s,name:"".concat(t," Canvas"),deployment_ids:[a]})},loading:w.isPending}):null;break;case 5:F=k?(0,a.jsx)(g,{platform:k,onClose:A,onConfirm:e=>{_.mutate({platformId:e,is_active:!1})},loading:_.isPending}):null;break;case 6:F=k?(0,a.jsx)(v,{platform:k,onClose:A,onConfirm:e=>{S.mutate({platformId:e,is_active:!0})},loading:S.isPending}):null}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.ms,{align:"end",trigger:(0,a.jsx)(n.$,{size:"icon",variant:"outline","aria-label":s?x.formatMessage({defaultMessage:"More options for {label}",id:"rKQPgfPvWS"},{label:s.name}):x.formatMessage({defaultMessage:"More options",id:"IzCVhGdYVc"}),children:(0,a.jsx)(i.H,{size:16,weight:"bold"})}),children:m.map(e=>(0,a.jsx)(l.tJ,{className:(0,o.A)("min-w-[175px]",[1,3,2,5].includes(e)&&"text-danger-000"),onClick:()=>{if(2===e&&(null==s?void 0:s.type)==="local"&&f){var t,a;null==(a=window.claudeAppBindings)||null==(t=a.openMcpSettings)||t.call(a,s.name)}else C(e)},children:E[e]},e))}),F]})}},45270:(e,t,s)=>{s.d(t,{O:()=>g,X:()=>h});var a=s(17411),n=s(27062),l=s(77101),r=s(37428),i=s(21036),o=s(25465),d=s(85717),c=s(65671),u=s(71436),m=s(45715),x=s(91768),f=s(44770);function g(){let{value:e}=(0,n.fS)("kingfisher_enabled"),t=(0,d.LP)(),{isDriveAuthenticated:s}=(0,d.cI)(),{value:a}=(0,n.fS)("pumpernickel_enabled"),r=(0,x.Ys)(l.v8.GMAIL),{isAuthenticated:o}=(0,x.ob)(l.v8.GMAIL),c=(0,x.Ys)(l.v8.GCAL),{isAuthenticated:u}=(0,x.ob)(l.v8.GCAL),m=(0,i.useLayer)("trials_freemium").get("free_integrations",!1);return{[l.v8.GDRIVE]:{type:l.v8.GDRIVE,available:e||m,enabledForOrg:t,connected:s},[l.v8.GMAIL]:{type:l.v8.GMAIL,available:a||m,enabledForOrg:r,connected:o},[l.v8.GCAL]:{type:l.v8.GCAL,available:a||m,enabledForOrg:c,connected:u}}}function h(){let e=Object.values(g()),t=(0,u.Cq)(),{isGithubAuthenticated:s}=(0,u.nB)({fetchImmediately:!0}),i=(0,r.wc)()[r.j$]||"invalid",{data:d}=(0,a.Jh)(i),h=d&&d.length>0,{value:p}=(0,n.fS)("spider_enabled_2"),v=(0,m.AI)(),{isOutlineAuthenticated:j}=(0,m.I5)(),{value:b}=(0,n.fS)("cinnabon_enabled"),y=(0,x.Ys)(l.v8.SALESFORCE),{isAuthenticated:N}=(0,x.ob)(l.v8.SALESFORCE),C=(0,x.Ys)(l.v8.ASANA),{isAuthenticated:A}=(0,x.ob)(l.v8.ASANA),{value:M}=(0,n.fS)("claude_ai_ember"),{value:w}=(0,n.fS)("claude_ai_velvet_accordion"),{data:S}=(0,o.sr)(),_=((null==S?void 0:S.filter(e=>e.is_active))||[]).length>0,{value:k}=(0,n.fS)("fiddlehead"),E=(0,c.w5)(),{isAuthenticated:F}=(0,c.eF)();return[...e,...h?[{type:l.v8.CUTTLEFISH,available:!0,enabledForOrg:!0,connected:!0}]:[],{type:l.v8.GITHUB,available:!0,enabledForOrg:t,connected:s},{type:l.v8.OUTLINE,available:p&&!1,enabledForOrg:v,connected:j},{type:l.v8.SALESFORCE,available:b,enabledForOrg:y,connected:N},{type:l.v8.ASANA,available:b,enabledForOrg:C,connected:A},{type:l.v8.FIDDLEHEAD,available:k,enabledForOrg:E,connected:F},{type:l.v8.CANVAS,available:M&&w&&!0,enabledForOrg:_,connected:_,connectedActions:_?[f.r.EDIT_CANVAS,f.r.DISABLE_CANVAS]:[],disconnectedActions:[]}].filter(e=>e.available)}},47823:(e,t,s)=>{s.d(t,{cG:()=>M,fI:()=>C,lg:()=>y,sd:()=>N,zA:()=>A});var a=s(54568),n=s(18472),l=s(8027),r=s(11515),i=s(1761),o=s(51121),d=s(86030),c=s(34059),u=s(1385),m=s(12072),x=s(9786),f=s(65631),g=s(77101),h=s(32987);s(7620);var p=s(46760),v=s(62971),j=s(88185),b=s(87907);function y(){let{account:e,activeOrganization:t}=(0,i.YL)(),s=(0,f.pG)(e,t,"claude-ai"),a=(0,f.yI)(e,t,f.Nt.IntegrationsManage),n=(0,i.mV)();return{manageFromOrg:n&&(a||s),manageFromPersonal:!n}}function N(e){let{url:t}=e,{copyToClipboard:s}=(0,x.C)(),{addSuccess:n}=(0,o.Y)(),l=(0,p.A)(),r=t.length>50?"".concat(t.substring(0,47),"..."):t;return(0,a.jsx)(m.m,{tooltipContent:(0,a.jsx)(v.A,{defaultMessage:"Copy URL",id:"P8QaSQLfW+"}),side:"bottom",align:"start",children:(0,a.jsx)("div",{className:"text-sm text-text-400 cursor-pointer hover:text-text-300 transition-colors truncate",onClick:()=>{s(t),n(l.formatMessage({defaultMessage:"Server URL copied",id:"Izgggpt47N"}))},children:r})})}function C(e){let{type:t,server:s,connected:i,children:o}=e,u=(0,b.ak)(),{isRemoteServerInDirectory:m}=(0,j.hW)(),x=!!s&&"remote"===s.type&&m(s),f=s?!s.isAuthless&&!s.isConnected:t&&!1===i,p=t===g.v8.FIDDLEHEAD?u(t):null==s?void 0:s.name;return(0,a.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.O,{size:42,className:(0,h.A)(f&&"opacity-50"),children:(0,a.jsx)(c.A9,{type:t,size:24})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-0 relative bottom-px",children:[(0,a.jsx)("span",{className:(0,h.A)("truncate",f&&"text-text-400"),children:u(t)}),f&&(0,a.jsx)("div",{className:"text-sm text-text-500",children:(0,a.jsx)(v.A,{defaultMessage:"Disconnected",id:"FZeQlcp+xX"})})]})]}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.O,{size:42,className:(0,h.A)(f&&"opacity-50"),children:(0,a.jsx)(r.d,{url:s.url,fallbackSvg:(0,a.jsx)(l.B,{hideBorder:!0,letter:p||"?",size:24}),size:24})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-0 relative bottom-px",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("span",{className:(0,h.A)("truncate",f&&"text-text-400"),children:p}),!x&&(0,a.jsx)(d.E,{children:"remote"===s.type?(0,a.jsx)(v.A,{defaultMessage:"CUSTOM",id:"Jg/zGahNtM"}):(0,a.jsx)(v.A,{defaultMessage:"LOCAL DEV",id:"S14UXqQo+W"})})]}),f?(0,a.jsx)("div",{className:"text-sm text-text-500",children:(0,a.jsx)(v.A,{defaultMessage:"Disconnected",id:"FZeQlcp+xX"})}):s.url&&!x&&(0,a.jsx)(N,{url:s.url})]})]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"flex gap-3 items-center",children:o})]})}function A(){return(0,a.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,a.jsx)(u.j,{width:42,height:42,rounded:"lg",variant:"light"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(u.j,{width:120,height:20,rounded:"md",variant:"light"}),(0,a.jsx)(u.j,{width:80,height:16,rounded:"md",variant:"light"})]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"flex gap-3 items-center",children:(0,a.jsx)(u.j,{width:80,height:32,rounded:"md",variant:"light"})})]})}function M(e){let{className:t}=e;return(0,a.jsx)("div",{className:(0,h.A)("border-t-[0.5px] border-border-300 m-2",t)})}},47838:(e,t,s)=>{s.d(t,{k:()=>r});var a=s(54568);s(7620);var n=s(8835),l=s(88185);let r=e=>{let{isDetailedView:t,directoryServer:s,handleAddRemoteServer:r,handleRemoveRemoteServer:i,handleConnectRemoteServer:o,handleDisconnectRemoteServer:d}=e,{getCorrespondingInstalledServer:c}=(0,l.Y5)(),u="remote"===s.type?c(s):null,m=!!u,x=!!u&&!!(u.isConnected||u.isAuthless),f=!!u&&!!u.isAuthless;return(0,a.jsx)(n.i,{handleAdd:()=>r(s.uuid),handleRemove:()=>i(s.uuid),handleConnect:()=>o(s.uuid),handleDisconnect:()=>d(s.uuid),isInstalled:m,isConnected:x,isDetailedView:t,connectedByDefault:f})}},50953:(e,t,s)=>{s.d(t,{u:()=>U});var a=s(54568),n=s(42067),l=s(41417),r=s(64359),i=s(9786),o=s(64786),d=s(90119),c=s(4705),u=s(58911),m=s(32987),x=s(27261),f=s.n(x),g=s(7620),h=s(62971),p=s(46760),v=s(92947),j=s(69055),b=s(60265),y=s(3354);let N=e=>{let{manifest:t}=e,{compatibility:s,isChecking:n}=(0,y.wH)({manifest:t}),l=(0,y.yo)(t,s);return t&&0!==l.length?(0,a.jsxs)("div",{className:"py-7 border-b-0.5 border-border-300",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-2",children:(0,a.jsx)(h.A,{defaultMessage:"Requirements",id:"T/GrW3GRjO",description:"Extension requirements section header"})}),n?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-text-300",children:[(0,a.jsx)(j.E,{size:16,className:"animate-spin"}),(0,a.jsx)(h.A,{defaultMessage:"Checking requirements...",id:"B3WNGMnvjq",description:"Loading state while checking extension requirements"})]}):(null==s?void 0:s.compatible)?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-success-600",children:[(0,a.jsx)(b.S,{size:16,weight:"bold"}),(0,a.jsx)(h.A,{defaultMessage:"All requirements met",id:"aTEJ6YhqYE",description:"Success message when all extension requirements are satisfied"})]}):(0,a.jsx)("div",{className:"space-y-2",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm ".concat(e.met?"text-success-600":"text-warning-600"),children:[e.met?(0,a.jsx)(b.S,{size:16,weight:"bold"}):(0,a.jsx)(c.i,{size:16,weight:"bold"}),(0,a.jsx)("span",{children:e.name})]},t))}),!(null==s?void 0:s.compatible)&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-warning-50 dark:bg-warning-950 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-warning-800 dark:text-warning-200",children:(0,a.jsx)(h.A,{defaultMessage:"This extension may not work correctly until all requirements are met.",id:"6EFoZgFJFB",description:"Warning message when extension requirements are not met"})})})]}):null};var C=s(70497);let A=e=>{let{markdown:t,className:s=""}=e;return t?(0,a.jsx)("div",{className:"".concat(s," [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-2 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-2 [&_li]:my-1 [&_p]:my-3 [&_p:first-child]:mt-0"),children:(0,a.jsx)(C.o,{allowedElements:["p","br","strong","em","ul","ol","li","a","code","pre","h1","h2","h3","h4","h5","h6","blockquote"],components:{a:e=>{let{href:t,children:s}=e;if(!t||!t.startsWith("https://"))return(0,a.jsx)("span",{children:s});let n=String(s);return n===t||t.includes(n.replace(/\s/g,""))?(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-accent-secondary-100 hover:underline",children:s}):(0,a.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-accent-secondary-100 hover:underline",children:[s," (",new URL(t).hostname,")"]})}},children:t})}):null};var M=s(874),w=s(11500),S=s(97301),_=s(15046),k=s(37711),E=s(62101),F=s(43172),D=s(58070),z=s(37463),I=s(62942),L=s(99512),O=s.n(L),T=s(43793),q=s(37076),P=s(48700);let V=e=>{let{isOpen:t,onClose:s,extension:n,server:l}=e,r=!n||(0,F.OO)({manifest:n.manifest,userConfig:n.settings.userConfig}),i=(0,g.useCallback)(()=>{r||s()},[r,s]),o=(0,g.useCallback)(async e=>{if(!n)return;let t={...n.settings,userConfig:e};await (null===E.Fd||void 0===E.Fd?void 0:E.Fd.setExtensionSettings(n.id,t)),(0,F.OO)({manifest:n.manifest,userConfig:e})||s()},[n,s]);return n&&t&&l?(0,a.jsx)(q.aF,{isOpen:t,onClose:i,modalSize:"lg",title:(0,a.jsxs)("div",{className:"font-ui inline-flex flex-row gap-2 items-center text-xl",children:[(0,a.jsx)(h.A,{defaultMessage:"Configure",id:"9t1iivhk67"}),(0,a.jsxs)("div",{className:"inline-flex flex-row gap-1 items-center",children:[(0,a.jsx)(w.h,{size:30,imageSize:20,iconUrl:l.iconUrl,name:l.name,type:"external"}),(0,a.jsxs)("span",{className:"font-normal",children:[" ",l.name]})]})]}),children:(0,a.jsx)(P.S,{manifest:n.manifest,settings:n.settings,onSave:async e=>{await o(e)},onCancel:s})}):null},Q=e=>{let{directoryServer:t}=e,s=(0,p.A)(),{extensions:n}=(0,M.O)(),r=(0,I.useRouter)(),i=n.find(e=>e.id===t.uuid),[o,d]=(0,g.useState)(!1),c=(0,g.useCallback)(()=>{i&&r.push("/settings/desktop/extensions/".concat(i.id))},[r,i]),u=(0,M.U)(),m=(0,D.Z)(t.uuid),x=(0,D.Z)(i);(0,g.useEffect)(()=>{m===t.uuid&&!x&&i&&(0,F.OO)({manifest:i.manifest,userConfig:i.settings.userConfig})&&d(!0)},[t.uuid,x,m,i]);let[f,v]=(0,g.useState)(null);if((0,g.useEffect)(()=>{null===E.Fd||void 0===E.Fd||E.Fd.onExtensionDownloadProgress((e,s,a,n)=>{e===t.uuid&&v({progress:s,rBytes:a,tBytes:n})})},[t.uuid]),(0,g.useEffect)(()=>{v(null)},[t.uuid]),(0,g.useEffect)(()=>{i&&f&&v(null)},[f,i]),!i&&null!==f){let e=s.formatMessage({defaultMessage:"Installing...",id:"r9ELLACQn2"});return(0,a.jsx)(z.P.div,{initial:{height:0},animate:{height:"auto"},className:"overflow-hidden",children:(0,a.jsx)("div",{className:"flex items-center justify-between bg-bg-300 rounded-lg px-4 py-3 gap-4 mt-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[f.tBytes?(0,a.jsx)("span",{className:"font-medium text-text-300 text-sm",children:e}):(0,a.jsx)(k.A,{className:"text-sm",children:e}),f.tBytes?(0,a.jsxs)("span",{className:"text-text-500 text-sm",children:[O()(f.rBytes,{maximumFractionDigits:1,locale:s.locale})," / ",O()(f.tBytes,{maximumFractionDigits:1,locale:s.locale})]}):null]}),(0,a.jsx)("div",{className:"bg-bg-500 w-full h-2 rounded-full p-0.5 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-accent-secondary-200 h-full rounded-full transition-width duration-500",style:{width:"".concat(f.progress,"%")}})})]})})})}return i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-bg-300 rounded-lg px-4 py-3 gap-4 mt-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:!i.settings.isEnabled&&(0,F.OO)({manifest:i.manifest,userConfig:i.settings.userConfig})?(0,a.jsx)("span",{className:"text-sm text-accent-secondary-100",children:s.formatMessage({defaultMessage:"This connector needs to be configured before it can be enabled.",id:"IhPSab4yuz",description:"Message shown when required config is missing"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"inline-block",onClick:()=>{u(i.id)},children:(0,a.jsx)(_.j,{checked:i.settings.isEnabled,readOnly:!0})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:i.settings.isEnabled?s.formatMessage({defaultMessage:"Enabled",id:"cnxLJKBabd",description:"Extension enabled status"}):s.formatMessage({defaultMessage:"Disabled",id:"4PQSGeQCas",description:"Extension disabled status"})})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.X,{extension:i}),(0,a.jsx)(l.$,{variant:"secondary",size:"sm",onClick:c,children:(0,a.jsx)(h.A,{defaultMessage:"Configure",id:"9t1iivhk67"})})]})]}),(0,a.jsx)(V,{isOpen:o,extension:i||null,server:t,onClose:()=>{d(!1)}})]}):null};var B=s(69517),Y=s(47838),H=s(88185);let U=e=>{let{directoryServer:t,...s}=e,n=(0,d.V)();return(0,a.jsxs)(r.r,{containerClassName:"max-h-full min-h-0 px-4 -mx-4",className:"max-h-full px-4 -mx-4 pb-10",children:[(0,a.jsx)(W,{directoryServer:t,...s}),"local"===t.type&&(0,a.jsx)(Q,{directoryServer:t}),(0,a.jsx)(G,{directoryServer:t}),"local"===t.type&&n?(0,a.jsx)(N,{manifest:t.manifest}):null,(0,a.jsx)(R,{directoryServer:t})]})},W=e=>{let{directoryServer:t,...s}=e,r=(0,d.V)(),{isDirectoryEnabled:i}=(0,M.O)(),{iconUrl:o,name:u,oneLiner:m}=t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex sm:flex-row flex-col gap-y-6 gap-x-4 mt-[1.125rem]",children:[(0,a.jsxs)("div",{className:"flex flex-row no-wrap gap-4 grow",children:[(0,a.jsx)(w.h,{size:60,imageSize:34,iconUrl:o,syncSourceType:"firstParty"===t.type?t.syncSourceType:void 0,name:u,type:"local"===t.type?"external":"firstParty"===t.type?"syncSource":"favicon"}),(0,a.jsxs)("div",{className:"flex flex-col font-ui grow sm:mt-1",children:[(0,a.jsx)("p",{className:"text-text-100 text-2xl font-medium",children:u}),(0,a.jsx)("p",{className:"font-base text-text-400 leading-normal",children:m})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:"remote"===t.type?(0,a.jsx)(Y.k,{isDetailedView:!0,directoryServer:t,...s}):"firstParty"===t.type?(0,a.jsx)(S.N,{isDetailedView:!0,directoryServer:t,...s}):(0,a.jsx)(B.H,{isDetailedView:!0,directoryServer:t})})]}),"local"!==t.type||r?null:(0,a.jsx)(n.l,{variant:"secondary",className:"mt-6 w-full",message:(0,a.jsx)(h.A,{defaultMessage:"Get Claude for Desktop to use this extension",id:"pJ3vQABZxc"}),customButton:(0,a.jsx)(l.$,{href:"https://claude.ai/download",target:"_blank",children:(0,a.jsx)(h.A,{defaultMessage:"Download",id:"5q3qC0sC3r"})})}),"local"===t.type&&t.onDiskPath?(0,a.jsx)(n.l,{variant:"danger",className:"mt-6 w-full",message:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"font-large-bold",children:(0,a.jsx)(h.A,{defaultMessage:"Only install extensions from developers you trust.",id:"J1DujH3Us6"})}),(0,a.jsx)("span",{children:(0,a.jsx)(h.A,{defaultMessage:"Installing will grant access to everything on your computer.",id:"V/YZmv6ycC"})})]}),icon:c.i}):null,"local"!==t.type||i?null:(0,a.jsx)(n.l,{variant:"secondary",className:"mt-6 w-full",message:(0,a.jsx)(h.A,{defaultMessage:"The Extensions Directory has been disabled on this device. Please contact your IT administrator for more information.",id:"uOwKLoFioe",description:"Message shown when viewing a local extension but the directory is disabled"})})]})},G=e=>{let{directoryServer:t}=e,s=(0,p.A)(),n=(0,v.vx)(),{getCorrespondingInstalledServer:l}=(0,H.Y5)(),r=(0,d.V)(),i=(0,d.V)(o.Wq),c="remote"===t.type&&!!l(t),u="remote"===t.type&&!n&&!c,{description:x,toolNames:f,promptNames:g,author:j}=t;return(0,a.jsxs)("div",{className:"flex flex-col gap-7 py-7 border-b-0.5 border-border-300",children:[!!u&&(0,a.jsx)(K,{children:(0,a.jsx)(h.A,{defaultMessage:"Ask your admin to add this for your team.",id:"Pf4A5vNvrs"})}),"local"===t.type&&r&&!i&&(0,a.jsx)(K,{children:(0,a.jsx)(h.A,{defaultMessage:"To install this extension, update to the latest version of Claude Desktop",id:"B9KzONSVUz",description:"update claude for desktop prompt to install desktop extensions"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[!!(null==j?void 0:j.name)&&(0,a.jsx)("p",{className:"text-text-300 text-base",children:(0,a.jsx)(h.A,{defaultMessage:"Developed by <a></a>",id:"4MPJbn/XP2",values:{a:()=>(null==j?void 0:j.url)?(0,a.jsx)(es,{name:j.name,url:j.url}):j.name}})}),!!x&&(0,a.jsx)(A,{className:"text-text-300 text-base",markdown:x})]}),!!(f.length||g.length)&&(0,a.jsxs)("div",{className:(0,m.A)("grid gap-y-8 gap-x-4",f.length&&g.length?"grid-cols-1 sm:grid-cols-2":"grid-cols-1"),children:[!!f.length&&(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(J,{title:s.formatMessage({defaultMessage:"Tools",id:"nUT0LvZVOx"}),count:f.length}),(0,a.jsx)($,{items:f})]}),!!g.length&&(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(J,{title:s.formatMessage({defaultMessage:"Prompts",id:"p7buKPIFPB"}),count:g.length}),(0,a.jsx)($,{items:g})]})]})]})},K=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"bg-bg-300 rounded-lg p-4 text-text-100 text-sm px-4 py-3",children:t})},R=e=>{let{directoryServer:t}=e,{didCopy:s,copyToClipboard:n}=(0,i.C)(),r=(0,p.A)(),{version:o,license:d,author:c,documentation:u,support:m,privacyPolicy:x}=t,f="remote"===t.type?t.url:null,g=[...u?[{name:r.formatMessage({defaultMessage:"Documentation",id:"isGKnzG5uL"}),url:u}]:[],...m?[{name:r.formatMessage({defaultMessage:"Support",id:"HqRNN8pEq/"}),url:m}]:[],...x?[{name:r.formatMessage({defaultMessage:"Privacy Policy",id:"vx0nkZ8xpy"}),url:x}]:[]];return(0,a.jsxs)("div",{className:"flex flex-col gap-4 py-7",children:[(0,a.jsx)(X,{children:(0,a.jsx)(h.A,{defaultMessage:"Details",id:"Lv0zJuL1jH"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[!!o&&(0,a.jsx)(et,{subheading:r.formatMessage({defaultMessage:"Version",id:"I3b4hnFnDd"}),children:o}),!!d&&(0,a.jsx)(et,{subheading:r.formatMessage({defaultMessage:"License",id:"HBxXD/YXNW"}),children:d}),!!(null==c?void 0:c.name)&&(0,a.jsx)(et,{subheading:r.formatMessage({defaultMessage:"Author",id:"tWkQ2JF/jQ"}),children:c.url?(0,a.jsx)(es,{name:c.name,url:c.url}):c.name}),!!f&&(0,a.jsx)(et,{subheading:r.formatMessage({defaultMessage:"Connector URL",id:"CV2vjsP6Ub"}),children:(0,a.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[f,(0,a.jsx)(l.$,{size:"icon_sm",variant:"ghost",className:"bg-bg-100 hover:opacity-100 -my-2",onClick:()=>void n(f),children:(0,a.jsx)(i.u,{didCopy:s})})]})}),!!g.length&&(0,a.jsx)(et,{subheading:r.formatMessage({defaultMessage:"More info",id:"HOsSgXORHL"}),children:g.map(e=>(0,a.jsx)(es,{name:e.name,url:e.url},e.name))})]})]})},$=e=>{var t,s;let{items:n}=e,l=g.useRef(null),r=g.useRef(null),[i,o]=(0,g.useState)(!1),[d,c]=(0,g.useState)(((null==(t=r.current)?void 0:t.offsetHeight)||0)>((null==(s=l.current)?void 0:s.offsetHeight)||0));return(0,g.useEffect)(()=>{var e,t;c(((null==(e=r.current)?void 0:e.offsetHeight)||0)>((null==(t=l.current)?void 0:t.offsetHeight)||0))},[n]),(0,a.jsxs)("div",{className:"flex flex-col gap-2.5 items-start",children:[(0,a.jsx)("div",{ref:l,className:(0,m.A)("w-full",!i&&"max-h-[6.5rem] overflow-hidden"),children:(0,a.jsx)("div",{ref:r,className:(0,m.A)("flex flex-row gap-2.5 flex-wrap"),children:n.map(e=>(0,a.jsx)(Z,{children:e},e))})}),d&&!i&&(0,a.jsx)("button",{className:"text-text-300 hover:text-text-200 opacity-50 text-sm",onClick:()=>o(!0),children:(0,a.jsx)(h.A,{defaultMessage:"View all",id:"pFK6bJU0EM"})})]})},Z=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"inline-flex items-center h-7 rounded-full px-3 bg-bg-300 border-border-300 border-0.5 min-w-0",children:(0,a.jsx)("p",{className:"text-text-300 text-sm overflow-hidden text-ellipsis",children:t})})},J=e=>{let{count:t,title:s}=e;return(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2 mb-0.5",children:[(0,a.jsx)(X,{children:s}),(0,a.jsx)("div",{className:"flex items-center rounded text-[0.8125rem] text-text-500 h-[1.125rem] px-[0.3125rem] bg-bg-300",children:t})]})},X=e=>{let{children:t}=e;return(0,a.jsx)("h3",{className:"text-text-100 font-medium text-base",children:t})},ee=e=>{let{children:t}=e;return(0,a.jsx)("h3",{className:"text-text-300 font-medium text-sm mb-0.5",children:t})},et=e=>{let{subheading:t,children:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(ee,{children:t}),(0,a.jsx)("div",{className:"flex flex-col gap-1 text-text-300 text-sm",children:s})]})},es=e=>{let{name:t,url:s}=e;return(0,a.jsxs)(f(),{href:s,target:"_blank",className:"inline-flex items-center gap-1 text-accent-secondary-200 hover:text-accent-secondary-100",children:[t,(0,a.jsx)(u.k,{size:16})]})}},59448:(e,t,s)=>{s.d(t,{Bz:()=>u,f$:()=>m,n$:()=>c});var a=s(16253),n=s(98518),l=s(51121),r=s(41969),i=s(7620),o=s(57383),d=s(86628);function c(e){let{track:t}=(0,n.st)(),[s,a]=(0,i.useState)({}),[l,o]=(0,i.useState)({});return(0,i.useEffect)(()=>{let s=!1;async function n(){if(!e||0===Object.keys(e).length)return;let n=await (0,d.D)(e,{method:"resources/list",params:{}},r.cv,{timeout:6e5}),l=await (0,d.D)(e,{method:"prompts/list",params:{}},r.Yu,{timeout:6e5});if(s)return;let i={},c={};Object.entries(n).forEach(e=>{var s,a,n;let[l,r]=e;t({event_key:"mcp.resources.listed",resource_count_on_server:null!=(a=null==(s=r.resources)?void 0:s.length)?a:0}),i[l]=(null!=(n=r.resources)?n:[]).sort((e,t)=>e.name.localeCompare(t.name))}),Object.entries(l).forEach(e=>{var s,a,n;let[l,r]=e;t({event_key:"mcp.prompts.listed",prompt_count_on_server:null!=(a=null==(s=r.prompts)?void 0:s.length)?a:0}),c[l]=(null!=(n=r.prompts)?n:[]).sort((e,t)=>e.name.localeCompare(t.name))}),a(i),o(c)}n();let l=setInterval(()=>void n(),6e5);return()=>{s=!0,clearInterval(l)}},[e,t]),{resources:s,prompts:l}}function u(){let{addError:e}=(0,l.Y)(),{track:t}=(0,n.st)(),{handleUpload:s}=(0,o.o)();return(0,i.useCallback)(async(a,n)=>{try{let e=(await a.request({method:"resources/read",params:{uri:n.uri}},r.ve,{timeout:15e3})).contents.map(e=>{let s;return"text"in e?(s=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(s=x(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([s],n.name,{type:e.mimeType})});e.length>0&&await s(e)}catch(t){e("Error uploading resource: ".concat(t))}},[t,e,s])}function m(e){let{track:t}=(0,n.st)(),{addError:s}=(0,l.Y)(),{handleUpload:d}=(0,o.o)();return(0,i.useCallback)(async(n,l,i)=>{if(n&&l)try{let s=await n.request({method:"prompts/get",params:{name:l.name,arguments:i}},r.HM,{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(i).length,assistant_messages:s.messages.filter(e=>"assistant"===e.role).length,user_messages:s.messages.filter(e=>"user"===e.role).length,text_messages:s.messages.filter(e=>"text"===e.content.type).length,image_messages:s.messages.filter(e=>"image"===e.content.type).length});let o=(e,t)=>{let s=e=>{let t=a._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},n=e=>"".concat(l.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],n("txt"),{type:"text/plain"});case"image":{let t=s(e.content.mimeType);return new File([x(e.content.data)],n(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var r;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(r=t.mimeType)?r:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let a=s(t.mimeType);return new File([x(t.blob)],"".concat(t.uri,".").concat(a),{type:t.mimeType})}throw Error("Invalid resource content");case"audio":throw Error("Audio content not supported");case"resource_link":throw Error("Resource links are not supported")}};if(1===s.messages.length)await d([o(s.messages[0],0)]);else if(s.messages.length>1){let e=s.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[o(e,t)]:[]),t=s.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let s=JSON.stringify(t,null,2);e.push(new File([s],"".concat(l.name,"_messages.json"),{type:"application/json"}))}await d(e)}null==e||e()}catch(e){s("Error getting prompt: ".concat(e))}},[t,s,d,e])}function x(e){let t=window.atob(e),s=new ArrayBuffer(t.length),a=new Uint8Array(s);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return s}},64707:(e,t,s)=>{s.d(t,{f:()=>u});var a=s(54568),n=s(1761),l=s(51121),r=s(41417),i=s(37076),o=s(46760),d=s(62971),c=s(99965);function u(e){var t;let{onClose:s,server:u}=e,m=(0,o.A)(),x=(0,n.mV)(),{activeOrganization:f}=(0,n.YL)(),{addError:g}=(0,l.Y)(),h=u.name,{mutate:p,isPending:v}=(0,c.ll)((null==f?void 0:f.uuid)||"",null!=(t=u.uuid)?t:"",{onSuccess:s,onError:()=>{g(m.formatMessage({defaultMessage:"Failed to disconnect server",id:"zX14mjXCQK"}))}});return(0,a.jsxs)(i.aF,{isOpen:!0,onClose:s,title:x?m.formatMessage({defaultMessage:"Disconnect {serverName} for your team?",id:"QktyTo9HSH"},{serverName:h}):m.formatMessage({defaultMessage:"Disconnect {serverName}?",id:"qlhEu4xmhz"},{serverName:h}),modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{defaultMessage:"This will disconnect {serverName} for everyone on your team.",id:"W/2zE+LA7Z",values:{serverName:h}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(d.A,{defaultMessage:"They’ll be able to continue previous chats referencing {serverName} content, but Claude won’t be able to access new content or perform new tasks.",id:"febCGTUpcY",values:{serverName:h}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{defaultMessage:"You can still continue previous chats that reference {serverName} content.",id:"xonrKBdErN",values:{serverName:h}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(d.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),(0,a.jsxs)(i.vW,{layout:"right",children:[(0,a.jsx)(r.$,{onClick:s,variant:"secondary",children:(0,a.jsx)(d.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(r.$,{loading:v,onClick:()=>p(),variant:"danger",children:(0,a.jsx)(d.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})})]})]})}},65671:(e,t,s)=>{s.d(t,{Qp:()=>u,eF:()=>c,w5:()=>d});var a=s(77186),n=s(1761),l=s(27062),r=s(37428),i=s(87606),o=s(62942);let d=()=>(0,l.fS)("fiddlehead").value,c=()=>{let{activeOrganization:e}=(0,n.YL)(),t=null==e?void 0:e.uuid,s=d(),l=(0,r.wc)(),{data:i,isFetched:c}=(0,a.Sk)("/api/oauth/organizations/".concat(t,"/oauth_tokens"),{enabled:!!(t&&s),staleTime:3e5}),u=(0,o.useSearchParams)().get("debug_fiddlehead_auth_override"),m=l[r.me],x=m&&(null==i?void 0:i.some(e=>e.application_name===m));return{isAuthenticated:null!==u?"1"===u:x,isFetched:c,initAuth:()=>{window.open(l[r.vf],"_blank")}}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,n.YL)(),s=null==t?void 0:t.uuid,l=d(),r=(0,i.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(s,"/fiddlehead/disconnect_and_delete_all"),"POST",{enabled:!!(t&&l),...e,onSuccess:function(){for(var t,a=arguments.length,n=Array(a),l=0;l<a;l++)n[l]=arguments[l];r.invalidateQueries({queryKey:["/api/oauth/organizations/".concat(s,"/oauth_tokens")]}),null==(t=e.onSuccess)||t.call(e,...n)}})}},69517:(e,t,s)=>{s.d(t,{H:()=>b});var a=s(54568),n=s(64786),l=s(90119),r=s(60265),i=s(7620),o=s(874),d=s(98518),c=s(41417),u=s(1385),m=s(12072),x=s(62101),f=s(32987),g=s(46760),h=s(62971),p=s(3354),v=s(55323);let j=e=>{let{directoryServer:t}=e,s=(0,g.A)(),{track:n}=(0,d.st)(),[{installed:l,progress:r},o]=(0,i.useState)({installed:null,progress:null}),{compatibility:j}=(0,p.wH)({manifest:t.manifest}),b=(null==j?void 0:j.compatible)===!1,y=(0,p.yo)(t.manifest,j).filter(e=>!e.met);(0,i.useEffect)(()=>{null===x.Fd||void 0===x.Fd||x.Fd.onExtensionDownloadProgress((e,s)=>{e===t.uuid&&o({installed:!1,progress:s})})},[t.uuid]),(0,i.useEffect)(()=>{o({installed:null,progress:null});let e=()=>{null===x.Fd||void 0===x.Fd||x.Fd.getInstalledExtensionsWithState().then(e=>{let s=e.some(e=>e.id===t.uuid);o(e=>({installed:s,progress:s?null:e.progress}))})};return e(),null===x.Fd||void 0===x.Fd?void 0:x.Fd.onExtensionsChanged(e)},[t.uuid]);let N=(0,i.useCallback)(async()=>{if(l)null===x.Fd||void 0===x.Fd||x.Fd.deleteExtension(t.uuid),o({installed:null,progress:null});else{var e,s,a;t.onDiskPath?(null===x.Fd||void 0===x.Fd||x.Fd.installExtensionFromPreview(t.uuid,t.onDiskPath),o({installed:null,progress:null})):null===x.Fd||void 0===x.Fd||x.Fd.installDxtFromDirectory(t.uuid,null);let l=await (null===x.Fd||void 0===x.Fd?void 0:x.Fd.getInstalledExtensionsWithState()),r=(null!=(a=null==l?void 0:l.length)?a:0)+1,i=(0,v.E)();n({event_key:"desktop_dxt_installed",extension_name:t.name,extension_author:(null==(e=t.author)?void 0:e.name)||"",extension_id:t.uuid,event_source:t.onDiskPath?"local_file":"directory",total_extensions_installed:r,app_version:(null==i?void 0:i.version)||"",extension_version:(null==(s=t.manifest)?void 0:s.version)||""})}},[t,l,n]);if(!1===l&&null!==r)return null;let C=null===l,A=(0,a.jsx)(c.$,{variant:"primary",size:"unset",className:(0,f.A)("!rounded-lg !text-sm relative h-8 rounded-md px-3 active:scale-[0.985] whitespace-nowrap !text-xs transition-[min-width] duration-200",null!==r&&"min-w-[8rem] bg-primary disabled:opacity-100","min-w-[6rem]"),onClick:N,disabled:null!==r||null===l||b,children:l?(0,a.jsx)(h.A,{defaultMessage:"Uninstall",id:"a8npXIgle+"}):C?(0,a.jsx)(u.j,{width:60,height:12}):(0,a.jsx)(h.A,{defaultMessage:"Install",id:"ubmFc8rrea"})});if(b&&!l){let e;if(0===y.length)e=s.formatMessage({defaultMessage:"This extension is not compatible with your device.",id:"DyWnSo/uD3"});else if(1===y.length)e=s.formatMessage({defaultMessage:"This extension requires {requirement}.",id:"RWZ5Obf4In"},{requirement:y[0].name});else{let t=y.map(e=>e.name).join(", ");e=s.formatMessage({defaultMessage:"This extension requires: {requirements}.",id:"Tiuglra9gk"},{requirements:t})}return(0,a.jsx)(m.m,{tooltipContent:e,children:(0,a.jsx)("span",{className:"inline-block",children:A})})}return A},b=e=>{let{isDetailedView:t,directoryServer:s}=e,i=(0,l.V)(n.Wq),{extensions:d,isDirectoryEnabled:c}=(0,o.O)(),u=d.some(e=>e.id===s.uuid);if(t)if(i&&c)return(0,a.jsx)(j,{directoryServer:s});else return null;return u?(0,a.jsx)(r.S,{size:16,className:"transition-opacity m-2 text-accent-secondary-100"}):null}},82010:(e,t,s)=>{s.d(t,{m:()=>j});var a=s(54568),n=s(17411),l=s(1761),r=s(51121),i=s(41417),o=s(37076),d=s(77101),c=s(37428),u=s(46760),m=s(62971),x=s(99965),f=s(85717),g=s(65671),h=s(71436),p=(s(45715),s(91768)),v=s(87907);function j(e){let{type:t,server:s,onClose:n}=e;if(s)return(0,a.jsx)(C,{server:s,onClose:n});switch(t){case d.v8.GITHUB:return(0,a.jsx)(b,{onClose:n});case d.v8.GDRIVE:return(0,a.jsx)(y,{onClose:n});case d.v8.OUTLINE:return;case d.v8.FIDDLEHEAD:return(0,a.jsx)(A,{onClose:n});case d.v8.CUTTLEFISH:return(0,a.jsx)(M,{onClose:n});default:return(0,a.jsx)(N,{type:t,onClose:n})}}function b(e){let{onClose:t}=e,{mutate:s,isPending:n}=(0,h.rW)();return(0,a.jsx)(w,{name:"GitHub",onDisconnect:s,disconnecting:n,onClose:t})}function y(e){let{onClose:t}=e,{mutate:s,isPending:n}=(0,f.U5)(),l=(0,u.A)();return(0,a.jsx)(w,{name:"Google Drive",onDisconnect:s,disconnecting:n,onClose:t,modalMessageOverride:l.formatMessage({defaultMessage:"You won’t be able to continue any previous chats that reference content from Google Docs.",id:"Zi7eVRnAwf"})})}function N(e){let{type:t,onClose:s}=e,{disconnect:n}=(0,p.ob)(t);return(0,a.jsx)(w,{name:(0,v.xI)(t),onDisconnect:n,disconnecting:!1,onClose:s})}function C(e){let{server:t,onClose:s}=e,n=(0,u.A)(),{activeOrganization:i}=(0,l.YL)(),{addError:o}=(0,r.Y)(),d=(0,x.p9)(),{mutate:c,isPending:m}=(0,x.W3)((null==i?void 0:i.uuid)||"",t.uuid,{onSuccess:()=>{d||window.location.reload()},onError:()=>{o(n.formatMessage({defaultMessage:"Failed to disconnect from server",id:"L488a5jdgF"}))}});return(0,a.jsx)(w,{name:t.name,onDisconnect:c,disconnecting:m,onClose:s})}function A(e){let{onClose:t}=e,{mutate:s,isPending:n}=(0,g.Qp)(),l=(0,v.ak)(),r=(0,c.wc)(),i=r[c.BU],o=r[c.jT],u=r[c.fh];return(0,a.jsx)(w,{name:l(d.v8.FIDDLEHEAD),onDisconnect:s,disconnecting:n,onClose:t,modalMessageOverride:i,modalTitleOverride:o,modalButtonOverride:u})}function M(e){let{onClose:t}=e,{mutate:s,isPending:l}=(0,n.fH)(),r=(0,v.ak)();return(0,a.jsx)(w,{name:r(d.v8.CUTTLEFISH),onDisconnect:s,disconnecting:l,onClose:t})}function w(e){let{name:t,onDisconnect:s,disconnecting:n,onClose:l,modalMessageOverride:r,modalTitleOverride:d,modalButtonOverride:c}=e,x=(0,u.A)(),f=null!=d?d:x.formatMessage({defaultMessage:"Disconnect {integrationName}?",id:"MUrNVj88RO"},{integrationName:t}),g=null!=c?c:x.formatMessage({defaultMessage:"Disconnect",id:"qj1uhzynub"});return(0,a.jsxs)(o.aF,{isOpen:!0,onClose:l,title:f,modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:null!=r?r:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{defaultMessage:"You can still continue previous chats that reference {integrationName} content.",id:"VKINZqb8Or",values:{integrationName:t}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(m.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),(0,a.jsxs)(o.vW,{children:[(0,a.jsx)(i.$,{onClick:l,variant:"secondary",children:(0,a.jsx)(m.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(i.$,{loading:n,onClick:()=>{s(),l()},variant:"danger",children:g})]})]})}},82258:(e,t,s)=>{s.d(t,{u:()=>h});var a=s(54568),n=s(1761),l=s(41417),r=s(91926),i=s(37076),o=s(12072),d=s(77101),c=s(38583),u=s(7620),m=s(46760),x=s(62971),f=s(91768),g=s(87907);function h(e){let{type:t,onClose:s}=e,r=(0,n.mV)(),o=(0,m.A)(),{mutate:c,isPending:h}=(0,f.xc)({onSuccess:s}),[v,j]=(0,u.useState)(!1),b=(0,g.xI)(t);return(0,a.jsxs)(i.aF,{isOpen:!0,onClose:s,title:r?o.formatMessage({defaultMessage:"Disconnect {serverName} for your team?",id:"QktyTo9HSH"},{serverName:b}):o.formatMessage({defaultMessage:"Disconnect {serverName}?",id:"qlhEu4xmhz"},{serverName:b}),modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{defaultMessage:"This will disconnect {serverName} for everyone on your team.",id:"W/2zE+LA7Z",values:{serverName:b}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(x.A,{defaultMessage:"They’ll be able to continue previous chats referencing {serverName} content, but Claude won’t be able to access new content or perform new tasks.",id:"febCGTUpcY",values:{serverName:b}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{defaultMessage:"You can still continue previous chats that reference {serverName} content.",id:"xonrKBdErN",values:{serverName:b}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(x.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),t===d.v8.GITHUB&&(0,a.jsx)(p,{shouldDeleteOnDisable:v,setShouldDeleteOnDisable:j}),(0,a.jsxs)(i.vW,{children:[(0,a.jsx)(l.$,{onClick:s,variant:"secondary",children:(0,a.jsx)(x.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(l.$,{loading:h,onClick:()=>{c({type:t,enabled:!1,should_delete_on_disable:v}),s()},variant:"danger",children:v?(0,a.jsx)(x.A,{defaultMessage:"Disconnect and delete cached files",id:"cpicqQfn34"}):(0,a.jsx)(x.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})})]})]})}function p(e){let{shouldDeleteOnDisable:t,setShouldDeleteOnDisable:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,a.jsx)(r.f,{checkState:t?"checked":"unchecked",onClick:e=>{let{didCheck:t}=e;return s(t)},label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-text-200",children:(0,a.jsx)(x.A,{defaultMessage:"Permanently delete cached GitHub files",id:"QWSlg2jyOj"})}),(0,a.jsx)(o.m,{tooltipContent:(0,a.jsx)(x.A,{defaultMessage:"We will never delete any files from GitHub, only files cached by claude.ai",id:"V7mFrvJBWC"}),children:(0,a.jsx)(c.R,{className:"text-text-400"})})]})})}),t&&(0,a.jsx)("div",{className:"flex items-start align-top min-h-[5rem] gap-2 mb-10 ml-10 text-danger-000",children:(0,a.jsxs)("ul",{className:"text-sm list-disc",children:[(0,a.jsx)("li",{children:(0,a.jsx)(x.A,{defaultMessage:"File deletion will begin a few minutes after submission.",id:"09chittDG9"})}),(0,a.jsx)("li",{children:(0,a.jsx)(x.A,{defaultMessage:"All files cached from GitHub will be permanently deleted from claude.ai.",id:"F1B0dvW0IP"})}),(0,a.jsx)("li",{children:(0,a.jsx)(x.A,{defaultMessage:"An audit log will be written when deletion has completed.",id:"aNLDY0cpk9"})})]})})]})}},86628:(e,t,s)=>{s.d(t,{D:()=>n});var a=s(41969);async function n(e,t,s,n){return e?Object.fromEntries((await Promise.all(Object.entries(e).map(async e=>{let[l,r]=e;try{let e=await r.request(t,s,{timeout:5e3,...n});return[l,e]}catch(e){if(e instanceof a.Nh&&e.code===a.O4.MethodNotFound)return null;return console.error("Request ".concat(t.method," to ").concat(l," failed: ").concat(e)),null}}))).filter(e=>null!==e)):{}}},87907:(e,t,s)=>{s.d(t,{ak:()=>i,cO:()=>l,xI:()=>r});var a=s(77101),n=s(37428);let l="settings",r=e=>a.sb[e]||e,i=()=>{let e=(0,n.wc)();return t=>t===a.v8.FIDDLEHEAD&&e[n.Wj]?e[n.Wj]:t===a.v8.CUTTLEFISH&&e[n.in]?e[n.in]:a.sb[t]||t}},91926:(e,t,s)=>{s.d(t,{f:()=>r});var a=s(54568),n=s(60370),l=s(32987);let r=(0,s(7620).forwardRef)((e,t)=>{let{checkState:s,onClick:r,label:i,...o}=e,d="partial"===s?n.Hsy:n.Jlk;return(0,a.jsxs)("div",{className:"p-2 -m-2 flex items-center",onClick:e=>{e.stopPropagation(),r({didCheck:"unchecked"===s})},children:[(0,a.jsx)("button",{ref:t,className:(0,l.A)("rounded p-[0.5px] border-0.5 flex items-center justify-center transition","unchecked"!==s?"bg-accent-secondary-000 border-accent-secondary-200 shadow-sm":"border-border-200 hover:bg-bg-000 hover:shadow-sm"),...o,children:(0,a.jsx)(d,{className:(0,l.A)("text-always-white transition",{invisible:"unchecked"===s}),size:16})}),i&&(0,a.jsx)("span",{className:"ml-2 cursor-pointer",children:i})]})});r.displayName="PartialCheckbox"},97301:(e,t,s)=>{s.d(t,{N:()=>r});var a=s(54568),n=s(45270),l=s(8835);let r=e=>{let{isDetailedView:t,directoryServer:s,handleAddFirstPartyServer:r,handleRemoveFirstPartyServer:i,handleConnectFirstPartyServer:o,handleDisconnectFirstPartyServer:d}=e,{syncSourceType:c}=s,{enabledForOrg:u,connected:m}=(0,n.O)()[c]||{};return(0,a.jsx)(l.i,{handleAdd:()=>r(c),handleRemove:()=>i(c),handleConnect:()=>o(c),handleDisconnect:()=>d(c),isInstalled:u,isConnected:m,isDetailedView:t,connectedByDefault:!1})}},99965:(e,t,s)=>{s.d(t,{Ov:()=>A,R4:()=>S,U8:()=>v,W3:()=>C,eB:()=>b,ll:()=>N,lu:()=>h,p4:()=>w,p9:()=>p,qb:()=>y,vW:()=>_});var a=s(98518),n=s(77186),l=s(1761),r=s(51121),i=s(71473),o=s(27062),d=s(41969),c=s(70825),u=s(87606),m=s(7620),x=s(75006),f=s(57383),g=s(59448);let h=()=>{let{value:e}=(0,o.fS)("papi_mcp");return e},p=()=>{let{value:e}=(0,o.fS)("papi_mcp_remote");return e},v=()=>{let{value:e}=(0,o.fS)("simplify_local_mcp");return e},j=x.z.object({uuid:x.z.string().uuid(),name:x.z.string(),url:x.z.string(),created_at:x.z.string().datetime(),updated_at:x.z.string().datetime(),custom_oauth_client_id:x.z.string().nullable().optional(),is_authenticated:x.z.boolean().default(!1)});function b(e,t){let s=h(),a=p();return(0,n.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[i.lA,e],enabled:!a&&s&&!!e,...t,select:e=>x.z.array(j).parse(e)})}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,{track:l}=(0,a.st)(),r=(0,u.useQueryClient)();return(0,n.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(a,n,o)=>{var d;M(r,e,a.uuid,"create",a),r.invalidateQueries({queryKey:[i.lA,e]}),r.invalidateQueries({queryKey:[i.qE,e]}),null==(d=t.onSuccess)||d.call(t,a,n,o),l({event_key:"claudeai.mcp.create_server",source:s.source,url:a.url,type:"remote"})}})}function N(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,u.useQueryClient)();return(0,n.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...s,onSuccess:(n,l,r)=>{var o;M(a,e,t,"delete"),a.invalidateQueries({queryKey:[i.lA,e]}),a.invalidateQueries({queryKey:[i.qE,e]}),null==(o=s.onSuccess)||o.call(s,n,l,r)}})}function C(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,u.useQueryClient)();return(0,n.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...s,onSuccess:(n,l,r)=>{var o;M(a,e,t,"logout",{connected:!1,tools:[],prompts:[],resources:[]}),a.invalidateQueries({queryKey:[i.lA,e]}),a.invalidateQueries({queryKey:[i.qE,e]}),null==(o=s.onSuccess)||o.call(s,n,l,r)}})}function A(e){var t;let s=h(),a=p(),{activeOrganization:r}=(0,l.YL)(),o=null==r?void 0:r.uuid,d=(0,n.Sk)("/api/organizations/".concat(o,"/mcp/bootstrap"),{queryKey:[i.$d,o],enabled:s&&a&&!!o,...e}),c=null==(t=d.data)?void 0:t.map(e=>{var t,s;return{name:e.name,uuid:e.uuid,type:"remote",url:e.url,custom_oauth_client_id:e.custom_oauth_client_id,isConnected:e.connected,isAuthless:!e.usedAuthentication&&e.connected,tools:(e.tools||[]).map(t=>{var s;return{name:t.name,description:null!=(s=t.description)?s:void 0,serverName:e.name,inputSchema:{type:"object"},callback:()=>{throw Error("Tool callbacks should be implemented separately")},enabledKey:t.enabled_key,alwaysApprovedKey:t.always_approved_key}}),prompts:null!=(t=e.prompts)?t:[],resources:null!=(s=e.resources)?s:[]}});return{...d,data:c}}async function M(e,t,s,a,n){try{e.setQueryData([i.$d,t],e=>{let t=null!=e?e:[];switch(a){case"create":return[...t,n].sort((e,t)=>e.name.localeCompare(t.name));case"update":case"logout":return t.map(e=>e.uuid===s?{...e,...n}:e).sort((e,t)=>e.name.localeCompare(t.name));case"delete":return t.filter(e=>e.uuid!==s)}});let l=await fetch("/api/organizations/".concat(t,"/mcp/bootstrap")),r=await l.json();e.setQueryData([i.$d,t],r)}catch(e){(0,c.Cp)(e,{tags:{action:"updateBootstrapData"},extra:{orgUuid:t,action:a,serverUuid:s}})}}function w(e){let t=p(),{activeOrganization:s}=(0,l.YL)(),a=null==s?void 0:s.uuid;return(0,n.L2)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"/tool_approval"),"POST",{enabled:!!e&&!!a&&t})}function S(){let{mutateAsync:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p(),{activeOrganization:s}=(0,l.YL)(),a=null==s?void 0:s.uuid;return(0,n.L2)("/api/organizations/".concat(a,"/mcp/attach_resource"),"POST",{enabled:t&&!!a,...e})}(),t=k(),{addError:s}=(0,r.Y)(),a=p(),i=(0,g.Bz)();return(0,m.useCallback)(async n=>{let{resource:l,serverUuid:r,client:o,onClose:u}=n;if(a)try{let s;o&&(s=await o.request({method:"resources/read",params:{uri:l.uri}},d.ve,{timeout:15e3}));let a=await e({resource:l,server_uuid:o?void 0:r,result:s});t(a),null==u||u()}catch(e){s("Error attaching resource: ".concat(e)),(0,c.Cp)(e,{tags:{action:"attach_resource"},extra:{serverUuid:r}})}else{if(!o){s("Failed to attach resource"),(0,c.Cp)(Error("No client on MCP server"));return}return i(o,l)}},[e,t,s,a,i])}function _(e){let{mutateAsync:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p(),{activeOrganization:s}=(0,l.YL)(),a=null==s?void 0:s.uuid;return(0,n.L2)("/api/organizations/".concat(a,"/mcp/attach_prompt"),"POST",{enabled:t&&!!a,...e})}(),s=k(),{addError:a}=(0,r.Y)(),i=p(),o=(0,g.f$)(e);return(0,m.useCallback)(async n=>{let{prompt:l,args:r,serverUuid:u,client:m}=n;if(i)try{let a;m&&(a=await m.request({method:"prompts/get",params:{name:l.name,arguments:r}},d.HM,{timeout:15e3}));let n=await t({prompt:l,arguments:r,server_uuid:m?void 0:u,result:a});s(n),null==e||e()}catch(e){a("Error attaching prompt: ".concat(e)),(0,c.Cp)(e,{tags:{action:"attach_prompt"},extra:{serverUuid:u}})}else{if(!m){a("Failed to attach prompt"),(0,c.Cp)(Error("No client on MCP server"));return}return o(m,l,r)}},[t,s,a,e,i,o])}function k(){let{setAttachments:e,setFiles:t}=(0,f.o)();return(0,m.useCallback)(s=>{let{files:a,attachments:n}=s;a&&a.length>0&&t(e=>{let t=new Set(e.map(e=>e.file_uuid));return[...e,...a.filter(e=>!t.has(e.file_uuid))]}),n&&n.length>0&&e(e=>Array.from(new Set([...e,...n].map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e)))},[e,t])}x.z.object({name:x.z.string(),url:x.z.string(),custom_oauth_client_id:x.z.string().nullable().optional(),custom_oauth_client_secret:x.z.string().nullable().optional()}),x.z.object({name:x.z.string().optional().nullable(),url:x.z.string().optional().nullable()})}}]);