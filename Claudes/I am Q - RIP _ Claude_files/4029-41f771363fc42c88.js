"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4029],{2341:(e,t,n)=>{n.d(t,{B:()=>o,N:()=>l});var a=n(54568),r=n(7620);let i=(0,r.createContext)(null),o=()=>{let e=(0,r.useContext)(i);return void 0===e?null:e},l=e=>{let{children:t,settings:n}=e;return(0,a.jsx)(i.Provider,{value:n,children:t})}},7726:(e,t,n)=>{n.d(t,{sk:()=>m,dy:()=>_,Rs:()=>R,Fn:()=>S,CW:()=>T,bT:()=>C,t7:()=>x,Vt:()=>z,uE:()=>w,OZ:()=>O,O2:()=>U,mz:()=>h,FG:()=>k,Bq:()=>L,EV:()=>b,Lo:()=>Q,_W:()=>E,yu:()=>A,HA:()=>P,HF:()=>M,Pt:()=>j,HI:()=>K,Du:()=>I,wR:()=>G,aC:()=>Y,gG:()=>D,uC:()=>B,lj:()=>N});var a=n(98518),r=n(77186),i=n(1761),o=n(2341),l=n(53248),u=n(71473),s=n(7620),c=n(75632),d=n(70825),p=n(87606),g=n(92012),f=n.n(g),v=n(62942),y=n(57067);let h=e=>{let t=(0,p.useQueryClient)(),{activeOrganization:n}=(0,i.YL)(),a=null==n?void 0:n.uuid,r=function(e){let t=JSON.stringify(e);return(0,s.useMemo)(()=>e,[t])}([u.fC,{orgUUID:a},{uuid:e}]);return t.getQueryData(r)},m=30,_=1e4,b=e=>{let{limit:t,offset:n,enabled:a=!0,starred:o,searchQuery:l}=e,{activeOrganization:s}=(0,i.YL)(),c=null==s?void 0:s.uuid,d=new URLSearchParams;void 0!==t&&d.append("limit",t.toString()),void 0!==n&&d.append("offset",n.toString()),void 0!==o&&d.append("starred",o.toString()),void 0!==l&&d.append("searchQuery",l);let p=d.toString();return p=p?"?".concat(p):"",(0,r.Sk)("/api/organizations/".concat(null!=c?c:"","/chat_conversations").concat(p),{queryKey:[u.DC,{orgUUID:c},{limit:t,offset:n,starred:o,searchQuery:l}],staleTime:3e5,enabled:!!c&&a})},S=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,r.Sk)("/api/organizations/".concat(t,"/chat_conversations/count_all"),{queryKey:[u.Ad,{orgUUID:t}],staleTime:3e5,enabled:!!t})},w=()=>{let{activeOrganization:e}=(0,i.YL)(),t=(0,r.mn)();return(0,s.useCallback)(async n=>{let{limit:a,offset:r}=n,i=new URLSearchParams;void 0!==a&&i.append("limit",a.toString()),void 0!==r&&i.append("offset",r.toString());let o=i.toString();return o=o?"?".concat(o):"",(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/chat_conversations").concat(o))).json()},[null==e?void 0:e.uuid,t])},L=function(e){let{suppressError:t,enabled:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0},{activeOrganization:a}=(0,i.YL)(),o=null==a?void 0:a.uuid,l=(0,s.useRef)([]),c=(0,p.useQueryClient)(),d="/api/organizations/".concat(null!=o?o:"","/chat_conversations/").concat(e,"?tree=True&rendering_mode=messages&render_all_tools=true"),g=(0,r.Sk)(d,{queryKey:[u.fC,{orgUUID:o},{uuid:e}],staleTime:3e5,enabled:!!o&&!!e&&n,meta:{noToast:t}},t=>(c.invalidateQueries({queryKey:[u.XF,{orgUUID:o,conversationUUID:e}]}),(0,y.H6)(t))),v=(0,s.useMemo)(()=>{if(!g.data)return l.current=[],l.current;let e=(0,y.$)(g.data);if(e.length!==l.current.length||e.some((e,t)=>{var n;return e.uuid!==(null==(n=l.current[t])?void 0:n.uuid)}))return l.current=e,l.current;for(let t=0;t<e.length;t++)f()(e[t],l.current[t])||(l.current[t]=e[t]);return l.current},[g.data]);return{...g,currentPath:v}},E=e=>{let t=(0,p.useQueryClient)(),{activeOrganization:n}=(0,i.YL)(),a=null==n?void 0:n.uuid;return(0,s.useCallback)(()=>{t.invalidateQueries({queryKey:[u.fC,{orgUUID:a},{uuid:e}]})},[t,a,e])},C=(e,t)=>{let{mutateAsync:n}=T(),a=(0,v.useRouter)(),r=t||(0,c.N)();return(0,s.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{model:void 0,controlsOpen:!1},i={uuid:r,name:"",model:t.model};t.createMode&&(i.create_mode=t.createMode),t.projectUuid&&(i.project_uuid=t.projectUuid),n(i).then(()=>{let n="/chat/".concat(r).concat(t.controlsOpen?"?controls=1":"");a[e](n)}).catch(e=>{(0,d.Cp)(e)})},[n,a,e,r])},T=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,n=(0,p.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(null!=t?t:"","/chat_conversations"),"POST",{enabled:!!t,onSuccess:e=>{let a;n.setQueryData((a=e.uuid,[u.fC,{orgUUID:t},{uuid:a}]),t=>({...t||{},...e,chat_messages:(null==t?void 0:t.chat_messages)||[],messageByUuid:new Map,parentByChildUuid:new Map,childrenByParentUuid:new Map,selectedChildByUuid:new Map}))}})},x=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,n=(0,p.useQueryClient)();return(0,r.Qv)(e=>{let{uuid:n}=e;return"/api/organizations/".concat(null!=t?t:"","/chat_conversations/").concat(n)},"DELETE",(e,t)=>{let{uuid:n}=e;if(!t)return[];let a=t.findIndex(e=>e.uuid===n);if(!(a>-1))return t;{let e=[...t];return e.splice(a,1),e}},{enabled:!!t,queryKey:[u.DC,{orgUUID:t}],onSuccess:async(e,a)=>{let{uuid:r,projectUuid:i}=a;await n.invalidateQueries({queryKey:[u.fC,{orgUUID:t},{uuid:r}]}),i&&await n.invalidateQueries({queryKey:[u.yF,{orgUuid:t,projectUuid:i}]}),await F(n,t)}})},z=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid,a=(0,p.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(n,"/chat_conversations/delete_many"),"POST",{onSuccess:async t=>{await F(a,n),e&&e(t)}})},A=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,r.Sk)("/api/organizations/".concat(t,"/shares"),{queryKey:[u._J,{orgUUID:t}],enabled:!!t,staleTime:3e5})},U=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid;return(0,r.Sk)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/latest"),{enabled:!!n&&!!e,queryKey:[u.XF,{orgUUID:n,conversationUUID:e}],staleTime:0,meta:{noToast:!0}},e=>{let{snapshot:t,shareable:n,disabled_reason:a}=e;return{shareable:n,disabled_reason:a,snapshot:t?{...t,chat_messages:t.chat_messages.map(e=>(0,y.XU)(e))}:null}})},k=e=>{let{activeOrganization:t,account:n}=(0,i.YL)(),a=null==t?void 0:t.uuid,o=n&&a?"/api/organizations/".concat(a,"/chat_snapshots/").concat(e,"?rendering_mode=messages&render_all_tools=true"):"/api/chat_snapshots/".concat(e,"?rendering_mode=messages&render_all_tools=true");return(0,r.Sk)(o,{retry:!1,refetchInterval:!1,enabled:!!e,staleTime:0,queryKey:[u.Bn,{orgUUID:a,snapshotUUID:e}]},e=>({...e,chat_messages:e.chat_messages.map(e=>(0,y.XU)(e))}))},I=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid,a=(0,p.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/share"),"POST",{onSuccess:()=>{a.invalidateQueries({queryKey:[u.XF,{orgUUID:n,conversationUUID:e}]}),a.invalidateQueries({queryKey:[u._J,{orgUUID:n}]}),a.invalidateQueries({queryKey:[u.A2,{orgUUID:n}]})}})},D=(e,t)=>{let{activeOrganization:n}=(0,i.YL)(),a=null==n?void 0:n.uuid,o=(0,p.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(a,"/share/").concat(t),"DELETE",{enabled:!!a&&!!t,meta:{errorMessage:"There was an error while trying to unshare the conversation. Please try again."},onSuccess:()=>{o.invalidateQueries({queryKey:[u.XF,{orgUUID:a,conversationUUID:e}]}),o.invalidateQueries({queryKey:[u._J,{orgUUID:a}]}),o.invalidateQueries({queryKey:[u.A2,{orgUUID:a}]})}})},Q=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid;return(0,r.Sk)("/api/organizations/".concat(n,"/artifact-versions/").concat(e),{retry:!1,refetchInterval:!1,enabled:!!e&&!!n,staleTime:0,queryKey:[u.Fz,{artifactVersionUUID:e}]})},P=function(e,t,n){var l,s,c;let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{track:g}=(0,a.st)(),f=null!=(s=null==(l=(0,o.B)())?void 0:l.preview_feature_uses_artifacts)&&s,{activeOrganization:v}=(0,i.YL)(),y=null==v?void 0:v.uuid,h=(0,p.useQueryClient)(),m=[u.fC,{orgUUID:y},{uuid:e}];return(0,r.L2)("/api/organizations/".concat(null!=y?y:"","/chat_conversations/").concat(e,"/chat_messages/").concat(null!=(c=t.uuid)?c:"","/chat_feedback"),t.chat_feedback?"PUT":"POST",{enabled:!!y,meta:{errorMessage:"We could not save your feedback. Please try again later."},...d,onSuccess(){for(var a,r,i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];g({event_key:"claudeai.conversation.feedback.sent",message_uuid:t.uuid,conversation_uuid:e,artifacts_enabled:f,conversationHasArtifacts:n,type:null==(a=t.chat_feedback)?void 0:a.type}),h.invalidateQueries({queryKey:m}),null==(r=d.onSuccess)||r.call(d,...o)}})},q=()=>{let e=(0,p.useQueryClient)(),{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid;return(0,s.useCallback)((t,a)=>{t&&(e.setQueryData([u.fC,{orgUUID:n},{uuid:t}],e=>e&&{...e,...a}),e.setQueriesData({queryKey:[u.DC,{orgUUID:n}]},e=>null==e?void 0:e.map(e=>e.uuid!==t?e:{...e,...a})))},[n,e])},K=e=>{let t=(0,p.useQueryClient)(),{activeOrganization:n}=(0,i.YL)(),a=null==n?void 0:n.uuid,o=q();return(0,r.L2)("/api/organizations/".concat(a,"/chat_conversations/").concat(e),"PUT",{onMutate:n=>{var r;let{name:i}=n,l=t.getQueryData([u.fC,{orgUUID:a},{uuid:e}]);return o(e,{name:i}),{oldTitle:null!=(r=null==l?void 0:l.name)?r:""}},onError(t,n,a){a&&o(e,{name:a.oldTitle})}})},O=e=>{let t=q(),{activeOrganization:n}=(0,i.YL)();return(0,r.L2)("/api/organizations/".concat(null==n?void 0:n.uuid,"/chat_conversations/").concat(e,"/title"),"POST",{onSuccess(n){let{title:a}=n;t(e,{name:null!=a?a:""})},meta:{noToast:!0}})};function R(e){var t,n;let a=(0,l.C)(e),r=e.attachments.map(e=>e.extracted_content).join(" ");return a+" "+r+" "+((null==(t=e.content)?void 0:t.filter(e=>"tool_use"===e.type).map(e=>e.input?JSON.stringify(e.input):e.partial_json||"").join(" "))||"")+" "+((null==(n=e.content)?void 0:n.filter(e=>"tool_result"===e.type).flatMap(e=>e.content.filter(e=>"text"===e.type).map(e=>e.text)).join(" "))||"")}let Y=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid;return(0,r.L2)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/stop_response"),"POST")},j=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,r.L2)(e=>{let{conversation_uuid:n}=e;return"/api/organizations/".concat(t,"/chat_conversations/").concat(n,"/tool_result")},"POST",{enabled:!!t,meta:{errorMessage:"We could not record the tool result. Please try again later."},transformVariables:e=>{let{conversation_uuid:t,...n}=e;return n}})},N=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid;return(0,r.L2)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/current_leaf_message_uuid"),"PUT")},M=(e,t)=>{let{activeOrganization:n}=(0,i.YL)(),a=(0,p.useQueryClient)(),o=null==n?void 0:n.uuid;return(0,r.Qv)("/api/organizations/".concat(o,"/chat_conversations/").concat(e,"?rendering_mode=raw"),"PUT",(e,t)=>t?{...t,settings:{...t.settings,...e.settings}}:void 0,{enabled:!!e,onSuccess:()=>{F(a,o)},onSettled:()=>{(null==t?void 0:t.refetchOnSettled)&&a.refetchQueries({queryKey:[u.fC,{orgUUID:o},{uuid:e}]})},queryKey:[u.fC,{orgUUID:o},{uuid:e}]})},F=async(e,t)=>{await Promise.all([e.invalidateQueries({queryKey:[u.DC,{orgUUID:t}]}),e.invalidateQueries({queryKey:[u.Ad,{orgUUID:t}]})])},G=e=>{let{activeOrganization:t}=(0,i.YL)(),n=(0,p.useQueryClient)(),a=null==t?void 0:t.uuid;return(0,r.Qv)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"?rendering_mode=raw"),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{F(n,a)},queryKey:[u.fC,{orgUUID:a},{uuid:e}]})},B=e=>{let{activeOrganization:t}=(0,i.YL)(),n=(0,p.useQueryClient)(),a=null==t?void 0:t.uuid;return(0,r.Qv)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"?rendering_mode=raw"),"PUT",(e,t)=>{var n;return t?{...t,project_uuid:null!=(n=e.project_uuid)?n:void 0}:void 0},{onSuccess:()=>{F(n,a),n.invalidateQueries({queryKey:[u.yF]})},queryKey:[u.fC,{orgUUID:a},{uuid:e}]})}},12072:(e,t,n)=>{n.d(t,{m:()=>v});var a=n(42977),r=n(54568),i=n(90510),o=n(91961),l=n(7620),u=n(32987),s=n(37463),c=n(67754);function d(){let e=(0,a._)(["\n  px-2\n  py-1\n  text-xs\n  font-normal\n  font-ui\n  leading-tight\n  rounded-md\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return d=function(){return e},e}function p(){let e=(0,a._)(["\n  max-w-[337px]\n  z-tooltip\n  [*:disabled_&]:hidden\n"]);return p=function(){return e},e}function g(){let e=(0,a._)(["\n  p-1\n  font-small-bold\n  rounded-lg\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return g=function(){return e},e}function f(){let e=(0,a._)(["\n  p-1\n  font-base\n  border-border-300\n  border-0.5\n  rounded-lg\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  text-text-100\n  bg-bg-100\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return f=function(){return e},e}function v(e){let{children:t,tooltipContent:n,contentStyle:a="default",side:i="top",sideOffset:s,align:d,className:p,delayDuration:g=200,keyboardShortcut:f,...v}=e,y=m[a],h=function(e){let t=(0,o.vm)();return(0,l.useMemo)(()=>{if(!e)return"";let n=e.toLowerCase().split("+").map(e=>e.trim()),a=[],r=[];n.forEach(e=>{["cmd","command","meta","ctrl","control","alt","option","shift"].includes(e)?a.push(e):r.push(e)});let i=["ctrl","control","alt","option","shift","cmd","command","meta"],o=[...a.sort((e,t)=>i.indexOf(e)-i.indexOf(t)).map(e=>t?({ctrl:"⌃",control:"⌃",alt:"⌥",option:"⌥",shift:"⇧",cmd:"⌘",command:"⌘",meta:"⌘"})[e]:({ctrl:"Ctrl",control:"Ctrl",alt:"Alt",option:"Alt",shift:"⇧",cmd:"Ctrl",command:"Ctrl",meta:"Ctrl"})[e]),...r.map(e=>{if(t){if("space"===e)return"␣";if("enter"===e||"return"===e)return"⏎";if("delete"===e||"backspace"===e)return"⌫";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"⇥";if("up"===e)return"↑";if("down"===e)return"↓";if("left"===e)return"←";if("right"===e)return"→"}else{if("space"===e)return"Space";if("enter"===e||"return"===e)return"Enter";if("delete"===e||"backspace"===e)return"Backspace";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"Tab";if("up"===e)return"Up";if("down"===e)return"Down";if("left"===e)return"Left";if("right"===e)return"Right"}return e.match(/^f\d+$/)||1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)})];return t?o.join(""):o.join("+")},[e,t])}(f||"");return(0,r.jsx)(c.Kq,{delayDuration:g,children:(0,r.jsxs)(c.bL,{...v,children:[(0,r.jsx)(c.l9,{asChild:!0,children:t}),(0,r.jsx)(c.ZL,{children:(0,r.jsx)("span",{children:(0,r.jsxs)(y,{className:(0,u.A)(p,!n&&"hidden"),sideOffset:null!=s?s:5,side:i,align:d,children:[n,f&&(0,r.jsx)("span",{className:"ml-1.5 opacity-70",children:h})]})})})]})})}let y=(0,i.J)(c.UC)(d()),h=(0,i.J)(c.UC)(p()),m={default:y,citation:e=>{let{children:t,...n}=e;return(0,r.jsx)(h,{...n,children:(0,r.jsx)(s.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"p-1 font-base text-text-200 bg-bg-100 break-words border-0.5 border-border-300/25 max-h-[300px] shadow-diffused shadow-[hsl(var(--always-black)/4%)] rounded-lg overflow-y-auto",children:t})})},inputMenu:(0,i.J)(c.UC)(g()),sampleImage:(0,i.J)(c.UC)(f())}},41417:(e,t,n)=>{n.d(t,{$:()=>p});var a=n(54568),r=n(18179),i=n(615),o=n(32987),l=n(27261),u=n.n(l),s=n(7620);let c="\n    text-text-000\n    font-base-bold\n    border-0.5\n    border-border-200\n    relative\n    overflow-hidden\n    transition\n    duration-100\n    hover:border-border-300/0\n    bg-bg-300/0\n    hover:bg-bg-400\n    backface-hidden",d=(0,i.F)("inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  can-focus\n  select-none\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none",{variants:{variant:{primary:"bg-text-000\n        text-bg-000\n        font-base-bold\n        relative\n        overflow-hidden\n        transition-transform\n        will-change-transform\n        ease-[cubic-bezier(0.165,0.85,0.45,1)]\n        duration-150\n        hover:scale-y-[1.015]\n        hover:scale-x-[1.005]\n        backface-hidden\n        after:absolute\n        after:inset-0\n        after:bg-[radial-gradient(at_bottom,hsla(var(--bg-000)/20%),hsla(var(--bg-000)/0%))]\n        after:opacity-0\n        after:transition\n        after:duration-200\n        after:translate-y-2\n        hover:after:opacity-100\n        hover:after:translate-y-0",flat:"bg-accent-main-000\n          text-oncolor-100\n          font-base-bold\n          transition-colors\n          hover:bg-accent-main-200",secondary:c,outline:c,ghost:"text-text-300\n          border-transparent\n          transition\n          font-ui\n          tracking-tight\n          duration-300\n          ease-[cubic-bezier(0.165,0.85,0.45,1)]\n          hover:bg-bg-300\n          aria-pressed:bg-bg-400\n          aria-checked:bg-bg-400\n          aria-expanded:bg-bg-400\n          hover:text-text-100\n          aria-pressed:text-text-100\n          aria-checked:text-text-100\n          aria-expanded:text-text-100",underline:"opacity-80\n          transition-all\n          active:scale-[0.985]\n          hover:opacity-100\n          hover:underline\n          underline-offset-3",danger:"bg-danger-200\n          text-oncolor-100\n          font-base-bold\n          transition\n          hover:scale-y-[1.015]\n          hover:scale-x-[1.005]\n          hover:opacity-95",unstyled:""},size:{default:"h-9 px-4 py-2 rounded-lg min-w-[5rem] active:scale-[0.985] whitespace-nowrap",sm:"h-8 rounded-md px-3 min-w-[4rem] active:scale-[0.985] whitespace-nowrap !text-xs",lg:"h-11 rounded-[0.6rem] px-5 min-w-[6rem] active:scale-[0.985] whitespace-nowrap !text-base",icon:"h-9 w-9 rounded-md active:scale-95 shrink-0",icon_xs:"h-6 w-6 rounded-md active:scale-95",icon_sm:"h-8 w-8 rounded-md active:scale-95",icon_lg:"h-11 w-11 rounded-[0.6rem] active:scale-95",inline:"px-0.5 rounded-[0.25rem]",unset:""},option:{rounded:"!rounded-full",prepend:"",append:""},state:{active:""}},compoundVariants:[{size:"default",option:"prepend",class:"pl-2 pr-3 gap-1"},{size:"lg",option:"prepend",class:"pl-2.5 pr-3.5 gap-1"},{size:"sm",option:"prepend",class:" pl-2 pr-2.5 gap-1"},{size:"default",option:"append",class:"pl-3 pr-2 gap-1"},{size:"lg",option:"append",class:"pl-3.5 pr-2.5 gap-1"},{size:"sm",option:"append",class:"pl-2.5 pr-2 gap-1"},{variant:"ghost",state:"active",class:"!bg-bg-400"}],defaultVariants:{variant:"primary",size:"default"}}),p=(0,s.forwardRef)((e,t)=>{let{className:n,variant:i,size:l,option:s,loading:c,href:p,onLinkClick:g,target:f,prepend:v,append:y,state:h,disabled:m,children:_,type:b="button",...S}=e;v&&(s="prepend"),y&&(s="append");let w=(0,o.A)(d({variant:i,size:l,option:s,state:h,className:n}),c&&"text-transparent ![text-shadow:_none]"),L=(0,a.jsxs)(a.Fragment,{children:[c&&(0,a.jsx)("div",{className:(0,o.A)("absolute inset-0 flex items-center justify-center",i&&"flat"!==i&&"danger"!==i?"secondary"===i?"text-text-400":"text-bg-300":"text-bg-000"),children:(0,a.jsx)(r.Loading,{size:"sm",inheritColor:!0,delay:0})}),v,_,y]});return p?(0,a.jsx)(u(),{href:p,target:f||"_self",className:w,"aria-label":S["aria-label"],onClick:g,children:L}):(0,a.jsx)("button",{className:w,ref:t,disabled:m||c,type:b,...S,children:L})});p.displayName="Button"},52909:(e,t,n)=>{n.d(t,{CO:()=>p,M3:()=>s,bG:()=>c,ks:()=>f,pz:()=>u,z_:()=>d});var a=n(77186),r=n(1761),i=n(71473),o=n(87606),l=n(91768);let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid,o=g(),u=(0,l.eL)();return(0,a.L2)(()=>"/api/organizations/".concat(i,"/projects/").concat(e,"/syncs"),"POST",{enabled:!!(n&&e),...t,onSuccess:function(){for(var n,a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];o(e),null==(n=t.onSuccess)||n.call(t,...r)},onError:function(){for(var e,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];null==(e=t.onError)||e.call(t,...a);let[i,o]=a;u(i,o)}})},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid,o=g();return(0,a.L2)(()=>"/api/organizations/".concat(i,"/projects/").concat(e,"/syncs"),"PUT",{enabled:!!(n&&e),...t,onSuccess:function(){for(var n,a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];o(e),null==(n=t.onSuccess)||n.call(t,...r)}})},c=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,o=g();return(0,a.Qv)(t=>"/api/organizations/".concat(n,"/projects/").concat(e,"/syncs/").concat(t),"DELETE",(e,t)=>t?t.filter(t=>t.uuid!==e):t,{queryKey:[i.LV,{orgUuid:n,projectUuid:e}],enabled:!!t,onSuccess:()=>{o(e)}})},d=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,o=g();return(0,a.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/syncs/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.sync_source_uuids.includes(t.uuid)):t,{queryKey:[i.LV,{orgUuid:n,projectUuid:e}],enabled:!!t,onSuccess:()=>{o(e)}})},p=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{activeOrganization:u}=(0,r.YL)(),s=null==u?void 0:u.uuid,c=(0,o.useQueryClient)(),d=!!(u&&e&&n),{data:p,isLoading:g}=(0,a.Sk)("/api/organizations/".concat(s,"/projects/").concat(e,"/syncs?calculate_size=").concat(null!=t&&t),{queryKey:[i.LV,{orgUuid:s,projectUuid:e,calculateSize:t}],enabled:d,refetchInterval:e=>{var t;return(null==(t=e.state.data)?void 0:t.some(l.z3))?5e3:3e5},structuralSharing:(t,n)=>{let a=void 0!==t&&t.some(l.z3),r=void 0!==n&&n.some(l.z3);return a&&!r&&c.invalidateQueries({queryKey:[i.qz,{orgUuid:s,projectUuid:e}]}),n}});return{data:p,isLoading:!!d&&g}},g=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,o.useQueryClient)();return e=>{n.invalidateQueries({queryKey:[i.LV,{orgUuid:t,projectUuid:e}]}),n.invalidateQueries({queryKey:[i._G,{orgUuid:t,projectUuid:e}]}),n.invalidateQueries({queryKey:[i.qz,{orgUuid:t,projectUuid:e}]})}},f=e=>{let{data:t}=p(e);return!!(null==t?void 0:t.some(l.z3))}},53248:(e,t,n)=>{n.d(t,{C:()=>a});let a=e=>{let t="";if(e.content)for(let n of e.content)"text"===n.type&&(t+=n.text);return t}},55554:(e,t,n)=>{n.d(t,{TierSelectorProvider:()=>d,t:()=>c});var a=n(54568),r=n(46612),i=n(27062),o=n(85544),l=n(7620),u=n(96712);let s=(0,l.createContext)(null),c=()=>{let e=(0,l.useContext)(s);if(!e)throw Error("useTierSelector must be used within a TierSelectorProvider");return e},d=e=>{var t;let{children:n,initialEnabled:c=!1}=e,d=(0,u.l)(),[p,g]=(0,l.useState)(()=>d.get(r.eT.SELECTED_TIER)||null),[f,v]=(0,l.useState)(()=>"true"===d.get(r.eT.SHOULD_OVERRIDE_TOKEN_LIMITS)),[y,h]=(0,l.useState)(()=>"true"===d.get(r.eT.SHOULD_OVERRIDE_FEATURE_ACCESS)),m=null!=(t=(0,i.fS)("internal_tier_selector").value)?t:c,_=(0,l.useState)(m)[1],b=(0,l.useCallback)(()=>{let e=[o.d7.FREE,o.d7.PRO,o.d7.ENTERPRISE,o.d7.MAX],t=Math.floor(Math.random()*e.length);return e[t]},[]),S=(0,l.useCallback)(e=>{if(!m)return void g(e);if(null===e){let e=p||b();d.set(r.eT.SELECTED_TIER,e,{maxAgeSeconds:2592e3})}else d.set(r.eT.SELECTED_TIER,e);g(e)},[p,g,d,b,m]);(0,l.useEffect)(()=>{m?p&&d.set(r.eT.SELECTED_TIER,p):d.delete(r.eT.SELECTED_TIER)},[m,p,d]);let w=(0,l.useCallback)(e=>{if(!m)return void v(e);e?d.set(r.eT.SHOULD_OVERRIDE_TOKEN_LIMITS,"true"):d.delete(r.eT.SHOULD_OVERRIDE_TOKEN_LIMITS),v(e)},[m,d]),L=(0,l.useCallback)(e=>{if(!m)return void h(e);e?d.set(r.eT.SHOULD_OVERRIDE_FEATURE_ACCESS,"true"):d.delete(r.eT.SHOULD_OVERRIDE_FEATURE_ACCESS),h(e)},[m,d]);return(0,l.useEffect)(()=>{m||(d.delete(r.eT.SHOULD_OVERRIDE_TOKEN_LIMITS),d.delete(r.eT.SHOULD_OVERRIDE_FEATURE_ACCESS))},[m,d]),(0,a.jsx)(s.Provider,{value:{selectedTier:p,isTierSelectorEnabled:m,setSelectedTier:S,setIsTierSelectorEnabled:_,shouldOverrideTokenLimits:f,setShouldOverrideTokenLimits:w,shouldOverrideFeatureAccess:y,setShouldOverrideFeatureAccess:L},children:n})}},57067:(e,t,n)=>{n.d(t,{$:()=>y,AP:()=>d,GN:()=>s,Gp:()=>c,H6:()=>g,Rh:()=>l,XU:()=>p,ZQ:()=>f,gF:()=>u,gX:()=>h,gv:()=>o,xQ:()=>v});var a=n(70825),r=n(6363),i=n.n(r);let o="new-assistant-message-uuid",l="new-human-message-uuid",u="00000000-0000-4000-8000-000000000000",s=e=>e!==o;function c(e,t){let n=e.get(t);if(void 0===n){let e=Error("Key not found: ".concat(t));throw(0,a.Cp)(e),e}return n}let d=(e,t)=>{let n=null!=t?t:e.current_leaf_message_uuid;if(!n)return e;for(;n!==u;){var a;let t=c(e.parentByChildUuid,n),r=null==(a=c(e.childrenByParentUuid,t))?void 0:a.indexOf(n);e.selectedChildByUuid.set(t,r),n=t}return{...e,current_leaf_message_uuid:t}},p=e=>e.content?e:{...e,content:[{type:"text",text:e.text||"",citations:[]}]},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Set;for(let t of e.chat_messages)"assistant"===t.sender&&t.parent_message_uuid&&n.add(t.parent_message_uuid);let a=e.chat_messages.filter(e=>"assistant"===e.sender||n.has(e.uuid)||void 0===e.parent_message_uuid||t),r={...e,chat_messages:a},i={...r,...(e=>{var t,n,a;let r=new Map,i=new Map,o=new Map,l=new Map,s=new Map;if(0===e.chat_messages.length)return{messageByUuid:i,parentByChildUuid:o,childrenByParentUuid:l,selectedChildByUuid:s};let c=e.chat_messages.map(p);for(let e of c)r.set(e.index,e),i.set(e.uuid,e);for(let e of c){let t=e.parent_message_uuid;if(!t){let a=e.index-1;for(;!t&&a>=0;)t=null==(n=r.get(a))?void 0:n.uuid,a--}t=null!=t?t:u,o.set(e.uuid,t),l.set(t,(null!=(a=l.get(t))?a:[]).concat(e.uuid)),s.set(t,0)}if(!(null==(t=l.get(u))?void 0:t[0]))throw Error("No root message found");return{chat_messages:c,messageByUuid:i,parentByChildUuid:o,childrenByParentUuid:l,selectedChildByUuid:s}})(r)};return i.current_leaf_message_uuid||d(i),d(i,r.current_leaf_message_uuid)},f=e=>{let t=Array.from(e.messageByUuid.values()).map(e=>e.index);return 0===t.length?-1:Math.max(...t)},v=(e,t)=>{for(let a of(e.chat_messages=e.chat_messages.concat(t),t)){var n;if(!a.parent_message_uuid)throw Error("Parent UUID required");let t=a.parent_message_uuid;e.messageByUuid.set(a.uuid,a),e.parentByChildUuid.set(a.uuid,t);let r=null!=(n=e.childrenByParentUuid.get(t))?n:[];r.push(a.uuid),e.childrenByParentUuid.set(t,r),e.selectedChildByUuid.set(t,r.length-1)}return d(e,t[t.length-1].uuid)},y=(e,t)=>{let n=[],a=null!=t?t:u;for(;e.childrenByParentUuid.has(a);){let t=c(e.childrenByParentUuid,a);if(0===t.length)break;let r=c(e.selectedChildByUuid,a),i=c(e.messageByUuid,t[r]);n.push({...i,parent_message_uuid:a,nOptions:t.length,selectedOption:r}),a=i.uuid}return n};function h(e,t,n){var a;let r=c(e.parentByChildUuid,t.uuid),o=c(e.childrenByParentUuid,r),l=i()((null!=(a=t.selectedOption)?a:0)+n,0,o.length-1);e.selectedChildByUuid.set(r,l);let u=y(e,r);return d(e,u[u.length-1].uuid)}},75632:(e,t,n)=>{n.d(t,{N:()=>a});let a=()=>void 0===crypto.randomUUID?"".concat(1e7,"-",1e3,"-",4e3,"-",8e3,"-",1e11).replace(/[018]/g,e=>{let t=parseInt(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):crypto.randomUUID()},77101:(e,t,n)=>{n.d(t,{I5:()=>i,sb:()=>r,v8:()=>a,xj:()=>o});var a=function(e){return e.GITHUB="github",e.GDRIVE="gdrive",e.OUTLINE="outlin",e.SALESFORCE="sfdc",e.GMAIL="gmail",e.GCAL="gcal",e.SLACK="slack",e.ASANA="asana",e.CANVAS="canvas",e.FIDDLEHEAD="fiddlehead",e.CUTTLEFISH="cuttlefish",e}({});let r={github:"GitHub",gdrive:"Google Drive",outlin:"Outline",sfdc:"Salesforce",gmail:"Gmail",gcal:"Google Calendar",slack:"Slack",asana:"Asana",canvas:"Canvas",fiddlehead:"Fiddlehead",cuttlefish:"Cuttlefish"};var i=function(e){return e.CREATED="created",e.PENDING="pending",e.FAILED="failed",e.UPDATING="updating",e.UPDATE_FAILED="update_failed",e.READY="ready",e.UNAUTHENTICATED="unauthenticated",e.ACCESS_DENIED="access_denied",e.DISABLED="disabled",e}({});let o=["access_denied","failed","unauthenticated","update_failed"]},85644:(e,t,n)=>{n.d(t,{A9:()=>g,Wq:()=>f,fC:()=>c});var a=n(77186),r=n(1761),i=n(71473),o=n(27062),l=n(85544),u=n(75006);let s={image_in:!0,pdf_in:!1},c=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,{data:o,isLoading:l,isPlaceholderData:u}=(0,a.Sk)("/api/organizations/".concat(n,"/model_configs/").concat(e),{queryKey:[i.yV,n,e],enabled:!!n,staleTime:3e5,meta:{noToast:!0}});return{isLoading:l,modelConfig:!u&&o||s}},d=u.z.array(u.z.object({model:u.z.string(),name:u.z.string(),description:u.z.string().optional(),description_i18n_key:u.z.string().optional(),notice_text:u.z.string().optional(),notice_text_i18n_key:u.z.string().optional(),inactive:u.z.boolean().optional(),overflow:u.z.boolean().optional(),knowledgeCutoff:u.z.string().optional(),slow_kb_warning_threshold:u.z.number().optional(),paprika_modes:u.z.array(l.T4).optional(),capabilities:u.z.object({mm_pdf:u.z.boolean().optional(),mm_images:u.z.boolean().optional(),web_search:u.z.boolean().optional(),gsuite_tools:u.z.boolean().optional(),compass:u.z.boolean().optional()}).optional()})),p=[],g=()=>{var e;let{value:t}=(0,o.fS)("backend_model_config"),{activeOrganization:n}=(0,r.YL)(),a=(0,o.T9)("claude_ai_models","models",p,d),i=t?null!=(e=null==n?void 0:n.claude_ai_bootstrap_models_config)?e:p:a,l=i.filter(e=>!e.inactive),u=l.filter(e=>!e.overflow),s=l.filter(e=>e.overflow);return{allModelOptions:i,activeModelOptions:l,mainModels:u,overflowModels:s}},f=()=>{let{allModelOptions:e}=g();return(t,n)=>{let a=e.find(e=>e.model===t);if(!a)return!1;let r=null==a?void 0:a.capabilities;return!r||!1!==r[n]}}},91768:(e,t,n)=>{n.d(t,{Dd:()=>C,FZ:()=>w,LN:()=>_,X0:()=>I,XE:()=>z,Ys:()=>A,dH:()=>L,eL:()=>T,fe:()=>D,ob:()=>k,ph:()=>S,tS:()=>m,xc:()=>b,z3:()=>E});var a=n(68096),r=n(77186),i=n(1761),o=n(51121),l=n(29585),u=n(71473),s=n(27062),c=n(77101),d=n(90119),p=n(21036),g=n(87606),f=n(62942),v=n(7620),y=n(46760),h=n(40459);let m=e=>e.type===c.v8.GITHUB?{sync_source_type:c.v8.GITHUB,sync_source_config:e.config}:e.type===c.v8.GDRIVE?{sync_source_type:c.v8.GDRIVE,sync_source_config:e.config}:null,_=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,r.Sk)("/api/organizations/".concat(t,"/sync/settings"),{queryKey:[u._V,{orgUUID:t}],enabled:!!e})},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid,a=(0,g.useQueryClient)();return(0,r.Qv)("/api/organizations/".concat(n,"/sync/settings"),"PUT",(e,t)=>{let{type:n,enabled:a}=e;t||(t=[]);let r=t.map(e=>e.type===n?{...e,enabled:a}:e);return r.some(e=>e.type===n)?r:[...t,{type:n,enabled:a}]},{queryKey:[u._V,{orgUUID:n}],enabled:!!t,onSuccess:async function(){for(var t,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];await a.invalidateQueries({queryKey:[u._V,{orgUUID:n}]}),await (null==(t=e.onSuccess)?void 0:t.call(e,...i))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid,a=(0,g.useQueryClient)(),{value:o}=(0,s.fS)("kingfisher_enabled"),{value:l}=(0,s.fS)("apps_use_bananagrams"),c=(0,p.useLayer)("trials_freemium").get("free_integrations",!1);return(0,r.Qv)("/api/organizations/".concat(n,"/sync/settings/config"),"POST",(e,t)=>{let{type:n,config:a}=e;return t||(t=[]),t.map(e=>e.type===n?{...e,config:{...e.config,...a}}:e)},{queryKey:[u._V,{orgUUID:n}],enabled:!!(t&&(o||c)&&l),onSuccess:async function(){for(var t,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];await a.invalidateQueries({queryKey:[u._V,{orgUUID:n}]}),await (null==(t=e.onSuccess)?void 0:t.call(e,...i))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},w=e=>{let{callerIdentifier:t,successParam:n,handleOpen:a}=e,r=(0,f.useSearchParams)(),i=(0,v.useRef)(!1);(0,v.useEffect)(()=>{!r.has(n)||i.current||t&&t!==r.get(n)||(i.current=!0,((e,t)=>{let n=new URLSearchParams(Array.from(t.entries()));n.delete(e);let a=n.toString()?"?".concat(n.toString()):"",r=window.location.pathname+a;window.history.replaceState({...window.history.state,as:r,url:r},"",r)})(n,r),a())},[r,t,a,n])},L=e=>{let{pathname:t,searchParams:n,queryString:a,isClaudeApp:r}=e,i="".concat(t,"?").concat(a),o=n.get("origin");if(o)i=o;else if(r){let e=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,n=t.startsWith("/project/")&&e.test(t.slice(9)),r=t.startsWith("/chat/")&&e.test(t.slice(6)),o=n||r||"/new"===t?t:"/new";i="claude://claude.ai".concat(o,"?").concat(a)}return i},E=e=>{let t;return t=e.status.state,[c.I5.CREATED,c.I5.PENDING,c.I5.UPDATING].includes(t)},C=e=>[c.I5.FAILED,c.I5.UPDATE_FAILED].includes(e.status.state),T=()=>{let{addError:e}=(0,o.Y)(),t=(0,g.useQueryClient)();return(n,a)=>{(e=>{if(e instanceof l.LG)return e instanceof l.LG&&"access_denied"===e.errorCode})(n)&&(e("Please try again. You may need to reconnect with your ".concat(c.sb[a.sync_source_type]," account.")),u.ku.forEach(e=>{t.invalidateQueries({queryKey:[e]})}),t.invalidateQueries({queryKey:[u.GC]}))}},x={[c.v8.GCAL]:"enabled_foccacia",[c.v8.GMAIL]:"enabled_sourdough"},z=e=>{let t=e===c.v8.GCAL||e===c.v8.GMAIL?"pumpernickel_enabled":"cinnabon_enabled",{value:n}=(0,s.fS)(t),a=(0,p.useLayer)("trials_freemium").get("free_integrations",!1),r=n||(e===c.v8.GCAL||e===c.v8.GMAIL)&&a;return!h.env.NEXT_PUBLIC_DISABLE_INTEGRATIONS&&r},A=e=>{let t=(e=>{let t=(0,i.mV)(),{data:n}=_(),a=!!(Array.isArray(n)&&n.find(t=>t.type===e&&t.enabled));return!t||a})(e);return!!(z(e)&&t)},U=e=>"sfdc"===e?"salesforce":e,k=function(e){let{callerIdentifier:t,handleAuthSuccess:n,pathname:a,queryString:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:u}=(0,i.YL)(),s=null==u?void 0:u.uuid,p=(0,f.usePathname)(),h=(0,f.useSearchParams)(),{addSuccess:m}=(0,o.Y)(),_=(0,y.A)(),b=A(e),S=(0,g.useQueryClient)(),E=(0,d.V)(),{data:C,isFetched:T}=(0,r.Sk)("/api/organizations/".concat(s,"/sync/").concat(U(e),"/auth"),{queryKey:["sync_".concat(e,"_auth_status"),{orgUUID:s}],enabled:!!(u&&b)}),x=(0,v.useRef)(!1),{mutate:z}=(0,r.L2)("/api/organizations/".concat(s,"/sync/").concat(U(e),"/auth/start"),"POST",{enabled:!!(u&&b),onSuccess:e=>{window.location.href=e.redirect_url}});w({callerIdentifier:t,successParam:"".concat(e,"_success"),handleOpen:()=>{m(_.formatMessage({defaultMessage:"Successfully connected to {integrationName}",id:"T7cL93l/KQ"},{integrationName:c.sb[e]})),null==n||n(!0)}});let{mutate:k}=(0,r.L2)("/api/organizations/".concat(s,"/sync/").concat(U(e),"/auth"),"DELETE",{enabled:!!(u&&b),onSuccess:()=>{S.invalidateQueries({queryKey:["sync_".concat(e,"_auth_status"),{orgUUID:s}]})}});return{isAuthenticated:b&&!!(null==C?void 0:C.is_authenticated),startAuth:()=>{if(!x.current&&b){let n=L({pathname:a||p,searchParams:h,queryString:"".concat(e,"_success=").concat(t).concat(l?"&".concat(l):""),isClaudeApp:E});if(E){window.location.href="/settings/connectors?open_in_browser=1&auth_start=".concat(e,"&origin=").concat(n);return}x.current=!0,z({pre_auth_state:{origin:n},redirect_uri:new URL("/connect/".concat(U(e),"/callback"),window.location.origin).toString()})}},disconnect:k,isFetched:T}},I=(e,t)=>{var n,a;let r=A(e),{account:o}=(0,i.YL)(),l=x[e];return l?r&&(t?!!(null==t||null==(n=t.conversationSettings)?void 0:n[l]):!!(null==o||null==(a=o.settings)?void 0:a[l])):r},D=()=>{let{account:e}=(0,i.YL)(),{mutate:t}=(0,a.Jy)();return{toggleIntegrationEnabled:(n,a)=>{if(!e)return;let r=x[n];r&&t({...e.settings,[r]:a})}}}},91961:(e,t,n)=>{n.d(t,{Fr:()=>r,K7:()=>p,Nj:()=>g,cX:()=>o,fJ:()=>d,lh:()=>f,uF:()=>s,vm:()=>l});var a=n(7620);function r(){return window.innerWidth<640}let i=/(macintosh|macintel|macppc|mac68k|macos)/i;function o(){let e=window.navigator.userAgent.toLowerCase();return i.test(e)}function l(){return(0,a.useMemo)(()=>/(macintosh|macintel|macppc|mac68k|macos)/i.test(window.navigator.userAgent),[])}let u=/(win32|win64|windows|wince)/i;function s(){let e=window.navigator.userAgent.toLowerCase();return u.test(e)}let c=/(iphone|ipad|ipod|android|mobile|webos)/i;function d(){let e=window.navigator.userAgent.toLowerCase();return c.test(e)}function p(e){(0,a.useEffect)(()=>{let t=document.title;return e&&(document.title="".concat(e," - Claude")),()=>{document.title=t}},[e])}let g=e=>{try{return new URL(e).hostname.split(".").slice(-2).join(".")}catch(e){return}},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=[16,32,48,64,96,128].find(e=>e>=2*t)||128,a=g(e);if(a)return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=").concat(n)}},98251:(e,t,n)=>{n.d(t,{Bg:()=>s,fR:()=>p,iV:()=>d,ih:()=>c,nI:()=>g});var a=n(77186),r=n(1761),i=n(51121),o=n(71473),l=n(77101),u=n(87606);let s=()=>{let{account:e,activeOrganization:t}=(0,r.YL)(),n=null==e?void 0:e.uuid,i=null==t?void 0:t.uuid,s=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(i,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{s.invalidateQueries({queryKey:[o.hx,{orgUuid:i,accountUuid:n,syncSourceType:l.v8.GDRIVE}]})},300)}})},c=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,{addError:n}=(0,i.Y)(),s=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(t,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{s.invalidateQueries({queryKey:[o.hx,{orgUuid:t,syncSourceType:l.v8.GDRIVE}]})},onError:e=>{n(e)}})},d=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,i=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/projects/").concat(e,"/kb/resync"),"POST",{enabled:!!e,meta:{noToast:!0},onSuccess:t=>{"done"===t.status&&i.invalidateQueries({queryKey:[o.qz,{orgUuid:n,projectUuid:e}]})}})},p=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/api/organizations/".concat(i,"/projects/").concat(e,"/kb/stats"),{queryKey:[o.qz,{orgUuid:i,projectUuid:e}],enabled:!!e&&t})},g=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/conversation/backfill"),"POST",{})}}}]);